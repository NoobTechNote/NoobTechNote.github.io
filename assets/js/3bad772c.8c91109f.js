"use strict";(self.webpackChunknoobtechnote_github_io_source=self.webpackChunknoobtechnote_github_io_source||[]).push([[715],{3905:function(t,e,a){a.d(e,{Zo:function(){return u},kt:function(){return c}});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var p=n.createContext({}),d=function(t){var e=n.useContext(p),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},u=function(t){var e=d(t.components);return n.createElement(p.Provider,{value:e},t.children)},m={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},k=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,p=t.parentName,u=o(t,["components","mdxType","originalType","parentName"]),k=d(a),c=r,s=k["".concat(p,".").concat(c)]||k[c]||m[c]||l;return a?n.createElement(s,i(i({ref:e},u),{},{components:a})):n.createElement(s,i({ref:e},u))}));function c(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=k;var o={};for(var p in e)hasOwnProperty.call(e,p)&&(o[p]=e[p]);o.originalType=t,o.mdxType="string"==typeof t?t:r,i[1]=o;for(var d=2;d<l;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},8974:function(t,e,a){a.r(e),a.d(e,{assets:function(){return u},contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return o},metadata:function(){return d},toc:function(){return m}});var n=a(7462),r=a(3366),l=(a(7294),a(3905)),i=["components"],o={title:"Ch4: \u6700\u5927\u5316\u7684\u5229\u7528HTTP Protocol",sidebar_label:"Ch4: \u6700\u5927\u5316\u7684\u5229\u7528HTTP Protocol",sidebar_position:4},p=void 0,d={unversionedId:"sg/web-api-the-good-parts/ch4-maximize-utilization-of-http",id:"sg/web-api-the-good-parts/ch4-maximize-utilization-of-http",title:"Ch4: \u6700\u5927\u5316\u7684\u5229\u7528HTTP Protocol",description:"4.1 \u4f7f\u7528 HTTP \u5354\u8b70\u898f\u7bc4\u7684\u610f\u7fa9",source:"@site/docs/sg/web-api-the-good-parts/ch4-maximize-utilization-of-http.md",sourceDirName:"sg/web-api-the-good-parts",slug:"/sg/web-api-the-good-parts/ch4-maximize-utilization-of-http",permalink:"/docs/sg/web-api-the-good-parts/ch4-maximize-utilization-of-http",draft:!1,editUrl:"https://github.com/NoobTechNote/NoobTechNote.github.io/tree/main/docs/sg/web-api-the-good-parts/ch4-maximize-utilization-of-http.md",tags:[],version:"current",lastUpdatedBy:"MichaelChen",lastUpdatedAt:1657725747,formattedLastUpdatedAt:"7/13/2022",sidebarPosition:4,frontMatter:{title:"Ch4: \u6700\u5927\u5316\u7684\u5229\u7528HTTP Protocol",sidebar_label:"Ch4: \u6700\u5927\u5316\u7684\u5229\u7528HTTP Protocol",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Ch3: Design Response Data",permalink:"/docs/sg/web-api-the-good-parts/ch3-design-response-data"}},u={},m=[{value:"4.1 \u4f7f\u7528 HTTP \u5354\u8b70\u898f\u7bc4\u7684\u610f\u7fa9",id:"41-\u4f7f\u7528-http-\u5354\u8b70\u898f\u7bc4\u7684\u610f\u7fa9",level:2},{value:"4.2 \u6b63\u78ba\u4f7f\u7528\u72c0\u614b\u78bc",id:"42-\u6b63\u78ba\u4f7f\u7528\u72c0\u614b\u78bc",level:2},{value:"HTTP \u72c0\u614b\u78bc\u53ef\u5340\u5206\u70ba\u4e94\u5927\u985e\uff1a",id:"http-\u72c0\u614b\u78bc\u53ef\u5340\u5206\u70ba\u4e94\u5927\u985e",level:3},{value:"4.3 Cache \u8207 HTTP",id:"43-cache-\u8207-http",level:2},{value:"4.3.1 \u904e\u671f\u6a21\u578b(Expiration Model)",id:"431-\u904e\u671f\u6a21\u578bexpiration-model",level:3},{value:"4.3.2 \u9a57\u8b49\u6a21\u578b(Validation Model)",id:"432-\u9a57\u8b49\u6a21\u578bvalidation-model",level:3},{value:"4.3.3 \u555f\u767c\u5f0f\u904e\u671f(Heuristic Expiration)",id:"433-\u555f\u767c\u5f0f\u904e\u671fheuristic-expiration",level:3},{value:"4.3.4 \u4e0d\u5e0c\u671b\u5be6\u65bd\u7de9\u5b58\u7684\u60c5\u6cc1",id:"434-\u4e0d\u5e0c\u671b\u5be6\u65bd\u7de9\u5b58\u7684\u60c5\u6cc1",level:3},{value:"4.3.5 \u4f7f\u7528Vary\u4f86\u6307\u5b9a\u7de9\u5b58\u55ae\u4f4d",id:"435-\u4f7f\u7528vary\u4f86\u6307\u5b9a\u7de9\u5b58\u55ae\u4f4d",level:3},{value:"4.4 Content-Type \u7684\u6307\u5b9a",id:"44-content-type-\u7684\u6307\u5b9a",level:2},{value:"4.5 Origin Policy \u8207 CORS \u8cc7\u6e90\u5171\u4eab",id:"45-origin-policy-\u8207-cors-\u8cc7\u6e90\u5171\u4eab",level:2},{value:"4.6 \u5b9a\u7fa9\u79c1\u6709\u7684 HTTP Header",id:"46-\u5b9a\u7fa9\u79c1\u6709\u7684-http-header",level:2},{value:"4.7 \u5c0f\u7d50",id:"47-\u5c0f\u7d50",level:2}],k={toc:m};function c(t){var e=t.components,o=(0,r.Z)(t,i);return(0,l.kt)("wrapper",(0,n.Z)({},k,o,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"41-\u4f7f\u7528-http-\u5354\u8b70\u898f\u7bc4\u7684\u610f\u7fa9"},"4.1 \u4f7f\u7528 HTTP \u5354\u8b70\u898f\u7bc4\u7684\u610f\u7fa9"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"- RFC (Request For Comments)\n")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"http_request_message_format",src:a(2965).Z,width:"660",height:"290"}),"\n",(0,l.kt)("img",{alt:"http_response_message_format",src:a(5571).Z,width:"660",height:"312"})),(0,l.kt)("p",null,"Image From:",(0,l.kt)("a",{parentName:"p",href:"http://www.tcpipguide.com/free/t_HTTPGenericMessageFormat.htm"},"The TCP/IP Guide")),(0,l.kt)("h2",{id:"42-\u6b63\u78ba\u4f7f\u7528\u72c0\u614b\u78bc"},"4.2 \u6b63\u78ba\u4f7f\u7528\u72c0\u614b\u78bc"),(0,l.kt)("h3",{id:"http-\u72c0\u614b\u78bc\u53ef\u5340\u5206\u70ba\u4e94\u5927\u985e"},"HTTP \u72c0\u614b\u78bc\u53ef\u5340\u5206\u70ba\u4e94\u5927\u985e\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"1xx \u6d88\u606f"),(0,l.kt)("li",{parentName:"ul"},"2xx \u6210\u529f"),(0,l.kt)("li",{parentName:"ul"},"3xx \u91cd\u65b0\u5c0e\u5411"),(0,l.kt)("li",{parentName:"ul"},"4xx \u5ba2\u6236\u7aef\u932f\u8aa4"),(0,l.kt)("li",{parentName:"ul"},"5xx \u4f3a\u670d\u5668\u932f\u8aa4")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u4e3b\u8981\u7684\u72c0\u614b\u78bc")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Status code"),(0,l.kt)("th",{parentName:"tr",align:null},"Nmae"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"200"),(0,l.kt)("td",{parentName:"tr",align:null},"OK"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8acb\u6c42\u6210\u529f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"201"),(0,l.kt)("td",{parentName:"tr",align:null},"Created"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8acb\u6c42\u5df2\u88ab\u63a5\u53d7\uff0c\u65b0\u7684\u8cc7\u6e90\u5df2\u5275\u5efa")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"202"),(0,l.kt)("td",{parentName:"tr",align:null},"Accepted"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8acb\u6c42\u6210\u529f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"204"),(0,l.kt)("td",{parentName:"tr",align:null},"No Content"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6c92\u6709\u5167\u5bb9")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"300"),(0,l.kt)("td",{parentName:"tr",align:null},"Multiple Choices"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd4\u56de\u591a\u689d\u91cd\u5b9a\u5411\u4f9b\u9078\u64c7")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"301"),(0,l.kt)("td",{parentName:"tr",align:null},"Moved Permanently"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6c38\u4e45\u91cd\u5b9a\u5411")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"302"),(0,l.kt)("td",{parentName:"tr",align:null},"Found"),(0,l.kt)("td",{parentName:"tr",align:null},"\u81e8\u65f6\u91cd\u5b9a\u5411")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"303"),(0,l.kt)("td",{parentName:"tr",align:null},"See Other"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7576\u524d\u8acb\u6c42\u7684\u8cc7\u6e90\u5728\u5176\u5b83\u5730\u5740")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"304"),(0,l.kt)("td",{parentName:"tr",align:null},"Not Modified"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8acb\u6c42\u8cc7\u6e90\u8207\u672c\u5730\u7de9\u5b58\u76f8\u540c\uff0c\u672a\u4fee\u6539")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"307"),(0,l.kt)("td",{parentName:"tr",align:null},"Temporary Redirect"),(0,l.kt)("td",{parentName:"tr",align:null},"\u81e8\u6642\u91cd\u5b9a\u5411\uff0c\u540c 302")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"400"),(0,l.kt)("td",{parentName:"tr",align:null},"Bad Request"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8acb\u6c42\u932f\u8aa4\uff0c\u901a\u5e38\u662f\u8a2a\u554f\u7684\u57df\u540d\u672a\u7d81\u5b9a\u5f15\u8d77")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"401"),(0,l.kt)("td",{parentName:"tr",align:null},"Unauthorized"),(0,l.kt)("td",{parentName:"tr",align:null},"\u9700\u8981\u8eab\u4efd\u8ba4\u8bc1\u9a8c\u8bc1")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"403"),(0,l.kt)("td",{parentName:"tr",align:null},"Forbidden"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7981\u6b62\u8a2a\u554f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"404"),(0,l.kt)("td",{parentName:"tr",align:null},"Not Found"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8acb\u6c42\u7684\u5167\u5bb9\u672a\u627e\u5230\u6216\u5df2\u522a\u9664")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"405"),(0,l.kt)("td",{parentName:"tr",align:null},"Method Not Allowed"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e0d\u5141\u8bb8\u7684\u8bf7\u6c42\u65b9\u6cd5")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"406"),(0,l.kt)("td",{parentName:"tr",align:null},"Not Acceptable"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7121\u6cd5\u97ff\u61c9\uff0c\u56e0\u8cc7\u6e90\u7121\u6cd5\u6eff\u8db3\u5ba2\u6236\u7aef\u689d\u4ef6")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"408"),(0,l.kt)("td",{parentName:"tr",align:null},"Request Timeout"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8acb\u6c42\u8d85\u6642")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"409"),(0,l.kt)("td",{parentName:"tr",align:null},"Conflict"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5b58\u5728\u885d\u7a81")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"410"),(0,l.kt)("td",{parentName:"tr",align:null},"Gone"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8cc7\u6e90\u5df2\u7d93\u4e0d\u5b58\u5728(\u904e\u53bb\u5b58\u5728)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"413"),(0,l.kt)("td",{parentName:"tr",align:null},"Payload Too Large"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8acb\u6c42\u7684 URI \u904e\u9577")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"414"),(0,l.kt)("td",{parentName:"tr",align:null},"Request-URI Too Long"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8acb\u6c42\u8cc7\u6e90\u8207\u672c\u5730\u7de9\u5b58\u76f8\u540c\uff0c\u672a\u4fee\u6539")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"415"),(0,l.kt)("td",{parentName:"tr",align:null},"Unsupported Media Type"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7121\u6cd5\u8655\u7406\u7684\u5a92\u9ad4\u683c\u5f0f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"429"),(0,l.kt)("td",{parentName:"tr",align:null},"Too Many Requests"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e26\u767c\u8acb\u6c42\u904e\u591a")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"500"),(0,l.kt)("td",{parentName:"tr",align:null},"Internal Server Error"),(0,l.kt)("td",{parentName:"tr",align:null},"\u670d\u52d9\u5668\u7aef\u7a0b\u5e8f\u932f\u8aa4")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"503"),(0,l.kt)("td",{parentName:"tr",align:null},"Service Unavailable"),(0,l.kt)("td",{parentName:"tr",align:null},"\u670d\u52d9\u5668\u7aef\u81e8\u6642\u932f\u8aa4")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n    "head": {\n        "errorCode": 1001,\n        "errorMessage": "Invalid parameter"\n    },\n    "body": {\n        :\n    }\n}\n')),(0,l.kt)("h2",{id:"43-cache-\u8207-http"},"4.3 Cache \u8207 HTTP"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6e1b\u5c11\u670d\u52d9\u5668\u7684\u9023\u7dda\u6578\u91cf\uff0c\u53ef\u4ee5\u63d0\u5347\u7528\u6236\u8a2a\u554f\u901f\u5ea6"),(0,l.kt)("li",{parentName:"ul"},"\u5728\u7db2\u8def\u9023\u7dda\u65b7\u958b\u7684\u72c0\u614b\u4e0b\u4e5f\u53ef\u4ee5\u5728\u67d0\u7a2e\u7a0b\u5ea6\u63d0\u4f9b\u670d\u52d9"),(0,l.kt)("li",{parentName:"ul"},"\u5ba2\u6236\u7aef\u5c07\u8cc7\u6599\u66ab\u5b58")),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Discussion")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u53cd\u5411\u4ee3\u7406\u670d\u52d9\u5668 Reverse Proxy"))),(0,l.kt)("h3",{id:"431-\u904e\u671f\u6a21\u578bexpiration-model"},"4.3.1 \u904e\u671f\u6a21\u578b(Expiration Model)"),(0,l.kt)("h3",{id:"432-\u9a57\u8b49\u6a21\u578bvalidation-model"},"4.3.2 \u9a57\u8b49\u6a21\u578b(Validation Model)"),(0,l.kt)("h3",{id:"433-\u555f\u767c\u5f0f\u904e\u671fheuristic-expiration"},"4.3.3 \u555f\u767c\u5f0f\u904e\u671f(Heuristic Expiration)"),(0,l.kt)("h3",{id:"434-\u4e0d\u5e0c\u671b\u5be6\u65bd\u7de9\u5b58\u7684\u60c5\u6cc1"},"4.3.4 \u4e0d\u5e0c\u671b\u5be6\u65bd\u7de9\u5b58\u7684\u60c5\u6cc1"),(0,l.kt)("h3",{id:"435-\u4f7f\u7528vary\u4f86\u6307\u5b9a\u7de9\u5b58\u55ae\u4f4d"},"4.3.5 \u4f7f\u7528Vary\u4f86\u6307\u5b9a\u7de9\u5b58\u55ae\u4f4d"),(0,l.kt)("h2",{id:"44-content-type-\u7684\u6307\u5b9a"},"4.4 Content-Type \u7684\u6307\u5b9a"),(0,l.kt)("h2",{id:"45-origin-policy-\u8207-cors-\u8cc7\u6e90\u5171\u4eab"},"4.5 Origin Policy \u8207 CORS \u8cc7\u6e90\u5171\u4eab"),(0,l.kt)("h2",{id:"46-\u5b9a\u7fa9\u79c1\u6709\u7684-http-header"},"4.6 \u5b9a\u7fa9\u79c1\u6709\u7684 HTTP Header"),(0,l.kt)("h2",{id:"47-\u5c0f\u7d50"},"4.7 \u5c0f\u7d50"))}c.isMDXComponent=!0},2965:function(t,e,a){e.Z=a.p+"assets/images/http_request_message_format-da749205ab80249c98c6e2a892a7b01b.png"},5571:function(t,e,a){e.Z=a.p+"assets/images/http_response_message_format-1371b22bf2adecfce111172b1593c7f8.png"}}]);