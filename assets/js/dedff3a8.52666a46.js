"use strict";(self.webpackChunknoobtechnote_github_io_source=self.webpackChunknoobtechnote_github_io_source||[]).push([[351],{3905:(e,t,a)=>{a.d(t,{Zo:()=>k,kt:()=>N});var l=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t){if(null==e)return{};var a,l,n=function(e,t){if(null==e)return{};var a,l,n={},r=Object.keys(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var m=l.createContext({}),p=function(e){var t=l.useContext(m),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},k=function(e){var t=p(e.components);return l.createElement(m.Provider,{value:t},e.children)},o="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},s=l.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,m=e.parentName,k=u(e,["components","mdxType","originalType","parentName"]),o=p(a),s=n,N=o["".concat(m,".").concat(s)]||o[s]||d[s]||r;return a?l.createElement(N,i(i({ref:t},k),{},{components:a})):l.createElement(N,i({ref:t},k))}));function N(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,i=new Array(r);i[0]=s;var u={};for(var m in t)hasOwnProperty.call(t,m)&&(u[m]=t[m]);u.originalType=e,u[o]="string"==typeof e?e:n,i[1]=u;for(var p=2;p<r;p++)i[p]=a[p];return l.createElement.apply(null,i)}return l.createElement.apply(null,a)}s.displayName="MDXCreateElement"},85162:(e,t,a)=>{a.d(t,{Z:()=>i});var l=a(67294),n=a(86010);const r={tabItem:"tabItem_Ymn6"};function i(e){let{children:t,hidden:a,className:i}=e;return l.createElement("div",{role:"tabpanel",className:(0,n.Z)(r.tabItem,i),hidden:a},t)}},74866:(e,t,a)=>{a.d(t,{Z:()=>y});var l=a(87462),n=a(67294),r=a(86010),i=a(12466),u=a(16550),m=a(91980),p=a(67392),k=a(50012);function o(e){return function(e){return n.Children.map(e,(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:a,attributes:l,default:n}}=e;return{value:t,label:a,attributes:l,default:n}}))}function d(e){const{values:t,children:a}=e;return(0,n.useMemo)((()=>{const e=t??o(a);return function(e){const t=(0,p.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function s(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function N(e){let{queryString:t=!1,groupId:a}=e;const l=(0,u.k6)(),r=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,m._X)(r),(0,n.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(l.location.search);t.set(r,e),l.replace({...l.location,search:t.toString()})}),[r,l])]}function c(e){const{defaultValue:t,queryString:a=!1,groupId:l}=e,r=d(e),[i,u]=(0,n.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!s({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const l=a.find((e=>e.default))??a[0];if(!l)throw new Error("Unexpected error: 0 tabValues");return l.value}({defaultValue:t,tabValues:r}))),[m,p]=N({queryString:a,groupId:l}),[o,c]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[l,r]=(0,k.Nk)(a);return[l,(0,n.useCallback)((e=>{a&&r.set(e)}),[a,r])]}({groupId:l}),g=(()=>{const e=m??o;return s({value:e,tabValues:r})?e:null})();(0,n.useLayoutEffect)((()=>{g&&u(g)}),[g]);return{selectedValue:i,selectValue:(0,n.useCallback)((e=>{if(!s({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);u(e),p(e),c(e)}),[p,c,r]),tabValues:r}}var g=a(72389);const h={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function b(e){let{className:t,block:a,selectedValue:u,selectValue:m,tabValues:p}=e;const k=[],{blockElementScrollPositionUntilNextRender:o}=(0,i.o5)(),d=e=>{const t=e.currentTarget,a=k.indexOf(t),l=p[a].value;l!==u&&(o(t),m(l))},s=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const a=k.indexOf(e.currentTarget)+1;t=k[a]??k[0];break}case"ArrowLeft":{const a=k.indexOf(e.currentTarget)-1;t=k[a]??k[k.length-1];break}}t?.focus()};return n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":a},t)},p.map((e=>{let{value:t,label:a,attributes:i}=e;return n.createElement("li",(0,l.Z)({role:"tab",tabIndex:u===t?0:-1,"aria-selected":u===t,key:t,ref:e=>k.push(e),onKeyDown:s,onClick:d},i,{className:(0,r.Z)("tabs__item",h.tabItem,i?.className,{"tabs__item--active":u===t})}),a??t)})))}function f(e){let{lazy:t,children:a,selectedValue:l}=e;const r=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===l));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return n.createElement("div",{className:"margin-top--md"},r.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==l}))))}function v(e){const t=c(e);return n.createElement("div",{className:(0,r.Z)("tabs-container",h.tabList)},n.createElement(b,(0,l.Z)({},e,t)),n.createElement(f,(0,l.Z)({},e,t)))}function y(e){const t=(0,g.Z)();return n.createElement(v,(0,l.Z)({key:String(t)},e))}},87758:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>u,toc:()=>p});var l=a(87462),n=(a(67294),a(3905));a(74866),a(85162);const r={title:"Ch3: \u5132\u5b58\u8207\u7d22\u5f15",sidebar_label:"Ch3: \u5132\u5b58\u8207\u7d22\u5f15",sidebar_position:3},i=void 0,u={unversionedId:"sg/ddia/ch3",id:"sg/ddia/ch3",title:"Ch3: \u5132\u5b58\u8207\u7d22\u5f15",description:"OLTP & OLAP",source:"@site/docs/sg/ddia/ch3.mdx",sourceDirName:"sg/ddia",slug:"/sg/ddia/ch3",permalink:"/docs/sg/ddia/ch3",draft:!1,editUrl:"https://github.com/NoobTechNote/NoobTechNote.github.io/tree/main/docs/sg/ddia/ch3.mdx",tags:[],version:"current",lastUpdatedBy:"HomaD",lastUpdatedAt:1717513769,formattedLastUpdatedAt:"Jun 4, 2024",sidebarPosition:3,frontMatter:{title:"Ch3: \u5132\u5b58\u8207\u7d22\u5f15",sidebar_label:"Ch3: \u5132\u5b58\u8207\u7d22\u5f15",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Ch1: \u53ef\u9760\u3001\u53ef\u64f4\u5c55\u8207\u53ef\u7dad\u8b77\u7684\u7cfb\u7d71",permalink:"/docs/sg/ddia/ch1"},next:{title:"Ch4: \u8cc7\u6599\u7de8\u78bc\u8207\u6f14\u5316",permalink:"/docs/sg/ddia/ch4"}},m={},p=[{value:"OLTP &amp; OLAP",id:"oltp--olap",level:2},{value:"\u7c21\u6613\u7684OLTP\u8cc7\u6599\u5eab",id:"\u7c21\u6613\u7684oltp\u8cc7\u6599\u5eab",level:2},{value:"\u5167\u5bb9\u7684\u5b58\u653e",id:"\u5167\u5bb9\u7684\u5b58\u653e",level:3},{value:"\u5206\u5340 (Segment)",id:"\u5206\u5340-segment",level:3},{value:"\u7d22\u5f15 (Index)",id:"\u7d22\u5f15-index",level:3},{value:"\u771f\u5be6\u4e16\u754c\u7684\u554f\u984c",id:"\u771f\u5be6\u4e16\u754c\u7684\u554f\u984c",level:3},{value:"Log Structured \u65e5\u8a8c\u7d50\u69cb\u5f15\u64ce",id:"log-structured-\u65e5\u8a8c\u7d50\u69cb\u5f15\u64ce",level:2},{value:"SSTable (Sorted String Table)",id:"sstable-sorted-string-table",level:3},{value:"SSTable\u7684\u512a\u52e2 1 - \u5408\u4f75Segement\u7684\u6548\u7387",id:"sstable\u7684\u512a\u52e2-1---\u5408\u4f75segement\u7684\u6548\u7387",level:4},{value:"SSTable\u7684\u512a\u52e2 2 - \u81ea\u5e36\u7d22\u5f15\u80fd\u529b",id:"sstable\u7684\u512a\u52e2-2---\u81ea\u5e36\u7d22\u5f15\u80fd\u529b",level:4},{value:"LSM Tree (Log Structured Merge Tree)",id:"lsm-tree-log-structured-merge-tree",level:3},{value:"\u5d29\u6f70\u8207\u56de\u5fa9",id:"\u5d29\u6f70\u8207\u56de\u5fa9",level:3},{value:"Log Strcutred \u5f15\u64ce\u7684\u5efa\u69cb\u548c\u7dad\u8b77",id:"log-strcutred-\u5f15\u64ce\u7684\u5efa\u69cb\u548c\u7dad\u8b77",level:3},{value:"LSM Tree\u7684\u6027\u80fd\u554f\u984c",id:"lsm-tree\u7684\u6027\u80fd\u554f\u984c",level:3},{value:"\u5c0f\u7d50",id:"\u5c0f\u7d50",level:3},{value:"Page Oriented \u5206\u9801\u5c0e\u5411\u5f15\u64ce",id:"page-oriented-\u5206\u9801\u5c0e\u5411\u5f15\u64ce",level:2},{value:"B-Tree",id:"b-tree",level:3},{value:"\u5d29\u6f70\u8207\u56de\u5fa9",id:"\u5d29\u6f70\u8207\u56de\u5fa9-1",level:3},{value:"BTree\u7684\u6700\u4f73\u5316",id:"btree\u7684\u6700\u4f73\u5316",level:3},{value:"B-Tree \u548c LSM Tree \u7684\u6bd4\u8f03",id:"b-tree-\u548c-lsm-tree-\u7684\u6bd4\u8f03",level:2},{value:"\u5176\u4ed6\u7d22\u5f15\u7d50\u69cb",id:"\u5176\u4ed6\u7d22\u5f15\u7d50\u69cb",level:2},{value:"\u5728\u7d22\u5f15\u4e2d\u5132\u5b58\u503c",id:"\u5728\u7d22\u5f15\u4e2d\u5132\u5b58\u503c",level:3},{value:"\u591a\u884c\u7d22\u5f15",id:"\u591a\u884c\u7d22\u5f15",level:3},{value:"\u5168\u6587\u6aa2\u7d22\u548c\u6a21\u7cca\u7d22\u5f15",id:"\u5168\u6587\u6aa2\u7d22\u548c\u6a21\u7cca\u7d22\u5f15",level:3},{value:"\u5c07\u6240\u6709\u7684\u6771\u897f\u5b58\u653e\u5728\u8a18\u61b6\u9ad4",id:"\u5c07\u6240\u6709\u7684\u6771\u897f\u5b58\u653e\u5728\u8a18\u61b6\u9ad4",level:3},{value:"\u4ea4\u6613\u8655\u7406\u9084\u662f\u5206\u6790\u8655\u7406\uff1f",id:"\u4ea4\u6613\u8655\u7406\u9084\u662f\u5206\u6790\u8655\u7406",level:2},{value:"\u8cc7\u6599\u5009\u5132",id:"\u8cc7\u6599\u5009\u5132",level:3},{value:"OLTP\u8cc7\u6599\u5eab\u548c\u8cc7\u6599\u5009\u5132\u4e4b\u9593\u7684\u5dee\u7570",id:"oltp\u8cc7\u6599\u5eab\u548c\u8cc7\u6599\u5009\u5132\u4e4b\u9593\u7684\u5dee\u7570",level:3},{value:"\u661f\u72c0\u8207\u96ea\u82b1:\u7528\u65bc\u5206\u6790\u7684\u57fa\u6a21",id:"\u661f\u72c0\u8207\u96ea\u82b1\u7528\u65bc\u5206\u6790\u7684\u57fa\u6a21",level:2},{value:"\u884c\u5f0f\u5132\u5b58(column-oriented storage)",id:"\u884c\u5f0f\u5132\u5b58column-oriented-storage",level:2},{value:"\u884c\u58d3\u7e2e",id:"\u884c\u58d3\u7e2e",level:3},{value:"\u8a18\u61b6\u9ad4\u983b\u5bec\u8207\u5411\u91cf\u5316\u8655\u7406",id:"\u8a18\u61b6\u9ad4\u983b\u5bec\u8207\u5411\u91cf\u5316\u8655\u7406",level:4},{value:"\u884c\u5132\u5b58\u4e2d\u7684\u6392\u5e8f",id:"\u884c\u5132\u5b58\u4e2d\u7684\u6392\u5e8f",level:3},{value:"\u5e7e\u7a2e\u4e0d\u540c\u7684\u6392\u5e8f\u9806\u5e8f",id:"\u5e7e\u7a2e\u4e0d\u540c\u7684\u6392\u5e8f\u9806\u5e8f",level:4},{value:"\u884c\u5f0f\u5132\u5b58\u7684\u5beb\u64cd\u4f5c",id:"\u884c\u5f0f\u5132\u5b58\u7684\u5beb\u64cd\u4f5c",level:3},{value:"\u805a\u5408:\u8cc7\u6599\u65b9\u9ad4\u8207\u5be6\u9ad4\u5316\u8996\u5716",id:"\u805a\u5408\u8cc7\u6599\u65b9\u9ad4\u8207\u5be6\u9ad4\u5316\u8996\u5716",level:2},{value:"\u5c0f\u7d50",id:"\u5c0f\u7d50-1",level:2}],k=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,n.kt)("div",t)},o=k("Row"),d=k("Col"),s={toc:p},N="wrapper";function c(e){let{components:t,...r}=e;return(0,n.kt)(N,(0,l.Z)({},s,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"oltp--olap"},"OLTP & OLAP"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u8ca0\u8f09\u7684\u5169\u7a2e\u985e\u578b",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"OLTP (Online Transactional Processing)"),(0,n.kt)("li",{parentName:"ul"},"OLAP (Online Analytical Processing)")))),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null}),(0,n.kt)("th",{parentName:"tr",align:null},"OLTP"),(0,n.kt)("th",{parentName:"tr",align:null},"OLAP"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u4e3b\u8981\u7684\u8b80\u53d6\u6a21\u5f0f"),(0,n.kt)("td",{parentName:"tr",align:null},"\u6bcf\u6b21\u67e5\u8a62\u5c11\u91cf\u7d00\u9304\uff0c\u6839\u64dakey\u4f86\u53d6\u5f97\u8cc7\u6599"),(0,n.kt)("td",{parentName:"tr",align:null},"\u805a\u5408\u5927\u91cf\u7684\u7d00\u9304")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u4e3b\u8981\u7684\u5beb\u5165\u6a21\u5f0f"),(0,n.kt)("td",{parentName:"tr",align:null},"\u96a8\u6a5f\u5b58\u53d6\uff0c\u5f9e\u4f7f\u7528\u8005\u8f38\u5165\u5230\u5beb\u5165\u8cc7\u6599\u5eab\u7684\u5ef6\u9072\u8981\u4f4e"),(0,n.kt)("td",{parentName:"tr",align:null},"\u5927\u91cf\u532f\u5165(ETL)\u6216\u4e8b\u4ef6\u6d41")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u4e3b\u8981\u7684\u4f7f\u7528\u8005"),(0,n.kt)("td",{parentName:"tr",align:null},"\u7d42\u7aef\u4f7f\u7528\u8005\u3001\u5ba2\u6236"),(0,n.kt)("td",{parentName:"tr",align:null},"\u5167\u90e8\u5206\u6790\u4eba\u54e1\uff0c\u652f\u63f4\u6c7a\u7b56")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u8cc7\u6599\u96c6\u5927\u5c0f"),(0,n.kt)("td",{parentName:"tr",align:null},"GP ~ TB"),(0,n.kt)("td",{parentName:"tr",align:null},"TP ~ PB")))),(0,n.kt)("admonition",{title:"Discussion",type:"info"},(0,n.kt)("p",{parentName:"admonition"},"OLTP\u7684\u8ca0\u8f09\u9700\u8981\u5177\u5099ACID(\u539f\u5b50\u6027\u3001\u4e00\u81f4\u6027\u3001\u9694\u96e2\u6027\u548c\u6301\u4e45\u6027)\u55ce\uff1f\u70ba\u4ec0\u9ebc\uff1f")),(0,n.kt)("h2",{id:"\u7c21\u6613\u7684oltp\u8cc7\u6599\u5eab"},"\u7c21\u6613\u7684OLTP\u8cc7\u6599\u5eab"),(0,n.kt)("h3",{id:"\u5167\u5bb9\u7684\u5b58\u653e"},"\u5167\u5bb9\u7684\u5b58\u653e"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Write: O(1)"),(0,n.kt)("li",{parentName:"ul"},"Read: O(N)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"If key unique grantee: O(logN)")))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'#!/bin/bash\ndb_set () {\n  echo "$1,$2" >> simple.db # append only\n}\n\ndb_get () {\n  grep "^$1," simple.db | sed -e "s/^$1,//" | tail -n 1\n}\n')),(0,n.kt)("h3",{id:"\u5206\u5340-segment"},"\u5206\u5340 (Segment)"),(0,n.kt)(o,{mdxType:"Row"},(0,n.kt)(d,{col:2,mdxType:"Col"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell",metastring:'title="Origin Segment"',title:'"Origin','Segment"':!0},"123,AAA # deprecated\n456,BBB # deprecated\n789,CCC\n456,DDD\n123,EEE\n\n# 123: EEE, 456: DDD, 789: CCC\n"))),(0,n.kt)(d,{col:2,mdxType:"Col"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell",metastring:'title="Compacted Segment"',title:'"Compacted','Segment"':!0},"789,CCC\n456,DDD\n123,EEE\n")))),(0,n.kt)("admonition",{title:"Discussion",type:"info"},(0,n.kt)("p",{parentName:"admonition"},"\u6240\u6709\u7684\u5167\u5bb9\u90fd\u653e\u5728\u540c\u4e00\u500b\u6a94\u6848\u6703\u6709\u4ec0\u9ebc\u554f\u984c\uff1f")),(0,n.kt)("admonition",{title:"Discussion",type:"info"},(0,n.kt)("details",null,(0,n.kt)("summary",null,"\u70ba\u4ec0\u9ebc\u4e0d\u5728\u5beb\u5165\u8cc7\u6599\u6642\uff0c\u76f4\u63a5\u66f4\u65b0\u8a72\u7b46\u8cc7\u6599\u6240\u5728\u7684\u5217\u5c31\u597d\uff1f\u800c\u8981\u63a1\u53d6append\u7684\u505a\u6cd5\uff1f"),(0,n.kt)("ul",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ul"},"\u5faa\u5e8f\u5beb\u5165\u64cd\u4f5c\u80fd\u6709\u8f03\u597d\u7684\u6548\u80fd",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5c0dSSD\u4f86\u8aaa\u66f4\u986f\u8457"))),(0,n.kt)("li",{parentName:"ul"},"\u5f9e\u5d29\u6f70\u56de\u5fa9\u8b8a\u7c21\u55ae",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u56e0\u70baappend\u5beb\u5165\u7684\u8cc7\u6599\u57fa\u672c\u4e0a\u662fimuntable\u7684"))),(0,n.kt)("li",{parentName:"ul"},"\u907f\u514d\u8cc7\u6599\u788e\u7247\u5316")))),(0,n.kt)("h3",{id:"\u7d22\u5f15-index"},"\u7d22\u5f15 (Index)"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u4ee5Hash\u7d22\u5f15\u70ba\u4f8b",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Write: O(1)"),(0,n.kt)("li",{parentName:"ul"},"Read: O(1)")))),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"fig3.1",src:a(27018).Z,width:"1152",height:"586"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5c07\u6bcf\u500bkey\u5c0d\u61c9value\u7684offset\u5efa\u7acb\u6210in-memory\u7684hash table\u4f5c\u70ba\u7d22\u5f15",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u6bcf\u6b21\u5beb\u5165\u65b0\u8cc7\u6599\u6642\u90fd\u66f4\u65b0\u8a18\u61b6\u9ad4\u5167\u7684\u7d22\u5f15"),(0,n.kt)("li",{parentName:"ul"},"\u7bc4\u4f8bDB\uff1a",(0,n.kt)("a",{parentName:"li",href:"https://github.com/basho/bitcask"},"Bitcask"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u6240\u6709\u7684key\u9700\u8981\u80fd\u5b8c\u6574\u5730\u653e\u5165memory"),(0,n.kt)("li",{parentName:"ul"},"\u9023\u7e8c\u5beb\u5165\uff1b\u96a8\u6a5f\u8b80\u53d6"),(0,n.kt)("li",{parentName:"ul"},"Value\u7684\u5927\u5c0f\u6bd4Key\u5927\u5f88\u591a\u7684\u60c5\u5883")))))),(0,n.kt)("h3",{id:"\u771f\u5be6\u4e16\u754c\u7684\u554f\u984c"},"\u771f\u5be6\u4e16\u754c\u7684\u554f\u984c"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5b58\u653e\u6a94\u6848\u683c\u5f0f",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Binary\u7684\u683c\u5f0f\u5b58\u653e\u8cc7\u6599\u6703\u6bd4CSV\u66f4\u5feb"))),(0,n.kt)("li",{parentName:"ul"},"\u522a\u9664\u7d00\u9304\u7684\u8655\u7406",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5728\u8cc7\u6599\u4e2d\u8ffd\u52a0\u7279\u6b8a\u7d00\u9304\uff0c\u7528\u4f86\u6a19\u793a\u8a72\u7b46\u8cc7\u6599\u5df2\u7d93\u522a\u9664",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u53c8\u7a31\u70batombstone"))))),(0,n.kt)("li",{parentName:"ul"},"\u5f9e\u5d29\u6f70\u56de\u5fa9",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5982\u679c\u7d22\u5f15\u53ea\u5b58\u5728\u8a18\u61b6\u9ad4\u4e2d\uff0c\u8cc7\u6599\u5eab\u91cd\u555f\u6703\u5931\u53bb\u7d22\u5f15",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u5728\u555f\u52d5DB engine\u6642\u8b80\u53d6\u6240\u6709\u7684segment\u5728\u8a18\u61b6\u9ad4\u4e2d\u91cd\u5efaindex"),(0,n.kt)("li",{parentName:"ul"},"Bitcask\u7684\u505a\u6cd5\uff0c\u6703\u5728\u786c\u789f\u4e2d\u5b58\u653e\u6bcf\u500bsegment\u7684hash index\u7684snapshot"))))),(0,n.kt)("li",{parentName:"ul"},"\u4e0d\u5b8c\u6574\u7684\u5beb\u5165",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5982\u679c\u5728\u5beb\u5165segment\u6642\u767c\u751f\u5d29\u6f70\uff0c\u8a72\u5982\u4f55\u8655\u7406\uff1f"),(0,n.kt)("li",{parentName:"ul"},"Bitcask\u5728\u5beb\u5165\u8cc7\u6599\u6642\u6703\u540c\u6642\u5beb\u5165checksum\uff0c\u53ef\u4ee5\u7528\u65bc\u6aa2\u51fa/\u5fa9\u539f\u8cc7\u6599\u640d\u58de\u90e8\u5206",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://zh.wikipedia.org/zh-tw/%E6%B1%89%E6%98%8E%E7%A0%81"},"Hamming Code")))))),(0,n.kt)("li",{parentName:"ul"},"\u4e26\u884c\u63a7\u5236",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u56e0\u70baSegment\u662fappend-only\u7684\uff0c\u56e0\u800c\u662f\u4e0d\u53ef\u8b8a\u7684(immutable)"),(0,n.kt)("li",{parentName:"ul"},"\u662fthread-safe\u7684\uff0c\u5141\u8a31\u88ab\u591a\u500b\u57f7\u884c\u7dd2\u540c\u6642\u5b58\u53d6"))),(0,n.kt)("li",{parentName:"ul"},"\u7d22\u5f15\u7684\u5c40\u9650\u6027",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u96dc\u6e4a\u7d22\u5f15\u9700\u8981\u5168\u90e8\u653e\u5165\u8a18\u61b6\u9ad4\u4e2d",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5f88\u5927\u91cf\u7684key\u7121\u6cd5\u4f7f\u7528"))),(0,n.kt)("li",{parentName:"ul"},"\u5982\u679c\u628aHash map\u653e\u9032\u786c\u789f\uff0c\u8981\u5c55\u73fe\u6027\u80fd\u6703\u8b8a\u5f97\u66f4\u56f0\u96e3",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u9700\u8981\u5927\u91cf\u7684Random Read I/O"))),(0,n.kt)("li",{parentName:"ul"},"\u96dc\u6e4a\u78b0\u649e\u554f\u984c"),(0,n.kt)("li",{parentName:"ul"},"\u7bc4\u570d\u67e5\u8a62\u6548\u7387\u4e0d\u9ad8",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u7121\u6cd5\u67e5\u8a62key001~key999\u7684\u6240\u6709keys"),(0,n.kt)("li",{parentName:"ul"},"\u53ea\u80fd\u4e00\u500b\u4e00\u500bkey\u67e5\u627e")))))),(0,n.kt)("h2",{id:"log-structured-\u65e5\u8a8c\u7d50\u69cb\u5f15\u64ce"},"Log Structured \u65e5\u8a8c\u7d50\u69cb\u5f15\u64ce"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"Log")," \u6307\u7684\u662f\u300c\u88ab\u5faa\u5e8f\u5beb\u5165\u7684\u300d\u7d00\u9304"),(0,n.kt)("li",{parentName:"ul"},"\u4e0a\u4e00\u500b\u5c0f\u7bc0\u7684\u4f8b\u5b50\u5373\u662f\u4e00\u500bLog Structured engine\u7684\u7c21\u55ae\u7bc4\u4f8b")),(0,n.kt)("h3",{id:"sstable-sorted-string-table"},"SSTable (Sorted String Table)"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u9032\u968e\u7684 Log Structured \u5132\u5b58\u7528\u8cc7\u6599\u7d50\u69cb"),(0,n.kt)("li",{parentName:"ul"},"\u76f8\u8f03\u65bc\u4e0a\u4e00\u7bc0\u7684\u4f8b\u5b50\uff0c\u52a0\u4e86\u5169\u689d\u898f\u5247",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5beb\u5165\u5230\u6a94\u6848\u4e2d\u7684 ",(0,n.kt)("inlineCode",{parentName:"li"},"key")," \u8981\u7d93\u904e",(0,n.kt)("span",{style:{color:"red"}},"\u6392\u5e8f")),(0,n.kt)("li",{parentName:"ul"},"\u6bcf\u500b ",(0,n.kt)("inlineCode",{parentName:"li"},"key")," \u5728\u540c\u4e00\u500b Segment ",(0,n.kt)("span",{style:{color:"red"}},"\u4e2d\u53ea\u80fd\u51fa\u73fe\u4e00\u6b21"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5df2\u7d93\u5728 Segment compacting \u904e\u7a0b\u4e2d\u4fdd\u8b49")))))),(0,n.kt)("h4",{id:"sstable\u7684\u512a\u52e2-1---\u5408\u4f75segement\u7684\u6548\u7387"},"SSTable\u7684\u512a\u52e2 1 - \u5408\u4f75Segement\u7684\u6548\u7387"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u53ea\u8981\u5728\u55ae\u500b Segment \u7684\u5167\u5bb9\u5c0f\u65bc Memory size"),(0,n.kt)("li",{parentName:"ul"},"\u80fd\u7dad\u6301\u9ad8\u6548\u7684 Segment Merge",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u76f8\u4f3c\u65bc ",(0,n.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Merge_sort"},"Merge Sort"))))),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"fig3.4",src:a(72129).Z,width:"1086",height:"732"})),(0,n.kt)("h4",{id:"sstable\u7684\u512a\u52e2-2---\u81ea\u5e36\u7d22\u5f15\u80fd\u529b"},"SSTable\u7684\u512a\u52e2 2 - \u81ea\u5e36\u7d22\u5f15\u80fd\u529b"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u4e0d\u9700\u8981\u5728 Memory \u4e2d\u5b58\u653e\u6240\u6709\u7684 ",(0,n.kt)("inlineCode",{parentName:"li"},"key")," \u5c31\u80fd\u9032\u884c\u6709\u6548\u7387\u7684\u641c\u5c0b",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u56e0 ",(0,n.kt)("inlineCode",{parentName:"li"},"key")," \u7d93\u904e\u6392\u5e8f\uff0c\u7406\u60f3\u60c5\u6cc1\u4e0b\uff0c\u53ef\u4ee5\u9054\u5230 O(logN) \u7684\u641c\u5c0b\u6548\u7387"),(0,n.kt)("li",{parentName:"ul"},"\u985e\u4f3c ",(0,n.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Binary_search_algorithm"},"Binary Search")))),(0,n.kt)("li",{parentName:"ul"},"\u56e0\u70ba\u6bcf\u500b ",(0,n.kt)("inlineCode",{parentName:"li"},"key")," \u6240\u5b58\u653e\u7684 ",(0,n.kt)("inlineCode",{parentName:"li"},"value")," \u5927\u5c0f\u4e26\u4e0d\u662f\u56fa\u5b9a\u7684\uff0c\u6240\u4ee5\u907f\u4e0d\u6389\u9700\u8981\u5728\u7279\u5b9a\u7684 key \u7bc4\u570d\u5167 scan \u7684\u60c5\u5883",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5c07\u9019\u500b\u7d22\u5f15\u653e\u5728 Memory \u5167\u4ee5\u7dad\u6301\u6548\u7387"),(0,n.kt)("li",{parentName:"ul"},"\u7d22\u5f15\u5167\u4fdd\u5b58\u90e8\u5206\u7684 ",(0,n.kt)("inlineCode",{parentName:"li"},"key")," \u7684 offset"))),(0,n.kt)("li",{parentName:"ul"},"\u8cc7\u6599\u5beb\u5165\u786c\u789f\u524d\u53ef\u4ee5\u7d93\u904e\u58d3\u7e2e\uff0c\u518d\u900f\u904e\u4e0a\u8ff0\u7684 in-memory index \u9032\u884c\u7d22\u5f15\u4ee5\u6e1b\u5c11I/O\u64cd\u4f5c")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"fig3.5",src:a(92510).Z,width:"1086",height:"550"})),(0,n.kt)("admonition",{title:"Discussion",type:"info"},(0,n.kt)("p",{parentName:"admonition"},"SSTable\u770b\u8d77\u4f86\u5f88\u4e0d\u932f\uff0c\u4f46key\u9700\u8981\u4fdd\u6301\u9806\u5e8f\u7684\u8a71\uff0c\u5beb\u5165\u6642\u600e\u9ebc\u7dad\u6301\u5beb\u5165\u7684\u6548\u7387\uff1f"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"SSTable key\u7684\u6392\u5e8f"),(0,n.kt)("ul",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5229\u7528\u300c\u81ea\u6211\u5e73\u8861\u6a39\u300d\u985e\u578b\u7684\u8cc7\u6599\u7d50\u69cb"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://zh.wikipedia.org/zh-tw/%E7%BA%A2%E9%BB%91%E6%A0%91"},"\u7d05\u9ed1\u6a39"),"\u3002"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://zh.wikipedia.org/zh-tw/AVL%E6%A0%91"},"AVL Tree"),"\u3002"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u80fd\u4ee5\u4efb\u610f\u9806\u5e8f\u63d2\u5165keys\uff0c\u4e26\u4e14\u4ee5\u7d93\u904e\u6392\u5e8f\u7684\u9806\u5e8f\u8b80\u53d6\u8cc7\u6599"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Write: O(logN)"),(0,n.kt)("li",{parentName:"ul"},"Read: O(logN)")))))),(0,n.kt)("h3",{id:"lsm-tree-log-structured-merge-tree"},"LSM Tree (Log Structured Merge Tree)"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u70ba\u4e86\u63d0\u9ad8\u5beb\u5165\u6548\u80fd\u800c\u8a2d\u8a08\u7684\u8cc7\u6599\u7d50\u69cb"),(0,n.kt)("li",{parentName:"ul"},"\u8cc7\u6599\u5beb\u5165\u6642\u6703\u5148\u653e\u5728 in-memory \u7684\u8cc7\u6599\u7d50\u69cb\u5167\uff0c\u7a31\u70bamemtable",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5230\u9054\u67d0\u500b\u95a5\u503c\u624d\u5f80\u786c\u789f\u5beb\u5165\uff0c\u4ee5\u6e1b\u5c11IO\u64cd\u4f5c"))),(0,n.kt)("li",{parentName:"ul"},"\u5b9a\u671f\u5c0d\u786c\u789f\u4e0a\u7684\u8cc7\u6599\u505a\u58d3\u7e2e\u548c\u5408\u4f75\u7684\u64cd\u4f5c"),(0,n.kt)("li",{parentName:"ul"},"\u901a\u5e38\u5305\u542b\u591a\u5c64\u7684\u8cc7\u6599\u7d50\u69cb\uff0c\u6bcf\u4e00\u5c64\u90fd\u6703\u6bd4\u4e0a\u4e00\u5c64\u5927\u5f88\u591a")),(0,n.kt)("p",null,"Reference: ",(0,n.kt)("a",{parentName:"p",href:"https://dev.to/creativcoder/what-is-a-lsm-tree-3d75"},"LSM Tree")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"LSMT",src:a(4981).Z,width:"800",height:"507"})),(0,n.kt)("h3",{id:"\u5d29\u6f70\u8207\u56de\u5fa9"},"\u5d29\u6f70\u8207\u56de\u5fa9"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5982\u679c\u8cc7\u6599\u5eab\u5d29\u6f70\uff0c\u8cc7\u6599\u9084\u5b58\u5728\u65bc memtable \u7684\u8cc7\u6599\u6703\u907a\u5931"),(0,n.kt)("li",{parentName:"ul"},"\u5728\u786c\u789f\u4e0a\u984d\u5916\u4fdd\u5b58\u55ae\u7368\u7684 ",(0,n.kt)("inlineCode",{parentName:"li"},"Log")," \uff0c\u6bcf\u6b21\u9032\u884c\u5beb\u5165\u64cd\u4f5c\u6642\u5c0d\u5176\u9032\u884cAppend\u5beb\u5165",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u56e0\u70ba\u50c5\u7528\u5728\u5d29\u6f70\u5fa9\u539f\uff0c\u53ea\u8981\u5728\u5c07memtable\u7684\u8cc7\u6599\u5beb\u5165SSTable\u6642\uff0c\u5c31\u53ef\u4ee5\u522a\u9664")))),(0,n.kt)("h3",{id:"log-strcutred-\u5f15\u64ce\u7684\u5efa\u69cb\u548c\u7dad\u8b77"},"Log Strcutred \u5f15\u64ce\u7684\u5efa\u69cb\u548c\u7dad\u8b77"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u7d50\u5408SSTable\u7684\u5132\u5b58\uff1bLSM Tree\u7684\u5206\u5c64")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5beb\u5165\u6642\uff0c\u5148\u5beb\u5165\u8a18\u61b6\u9ad4\u4e2d\u7684\u5e73\u8861\u6a39\u8cc7\u6599\u7d50\u69cb",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u4f5c\u70baI/O Buffer\uff0c\u76f4\u5230\u5927\u5c0f\u8d85\u904e\u67d0\u500b\u95a5\u503c\u624d\u5c0d\u786c\u789f\u9032\u884c\u5beb\u5165 (\u901a\u5e38\u70ba\u5e7eMB)"),(0,n.kt)("li",{parentName:"ul"},"\u5373\uff0cmemtable"))),(0,n.kt)("li",{parentName:"ul"},"\u5beb\u5165\u5230\u786c\u789f\u6642\u4f5c\u70baSSTable\u5beb\u5165",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u56e0\u70ba\u5728 memtable \u4e2d\u8b80\u53d6\u51fa\u4f86\u662f\u6709\u9806\u5e8f\u7684\u8cc7\u6599\uff0c\u5beb\u5165\u5230\u786c\u789f\u6642\u4e0d\u9700\u984d\u5916\u7684\u6392\u5e8f\u64cd\u4f5c")))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u8b80\u53d6\u6642\uff0c\u5148\u5617\u8a66\u5728 memtable \u4e2d\u5c0b\u627e\u8cc7\u6599"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u627e\u5f97\u5230\u5c31\u8fd4\u56de\u7d50\u679c (Memory O(logN))"),(0,n.kt)("li",{parentName:"ul"},"\u627e\u4e0d\u5230\u518d\u4f9d\u5e8f\u5f9e\u786c\u789f\u4e2d\u7684 SSTable segment\u4e2d\u5c0b\u627e (Disk O(logN))"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u80cc\u666f\u4e0d\u5b9a\u6642\u7684\u9032\u884c Segments \u7684\u5408\u4f75\u8207\u58d3\u7e2e\u52d5\u4f5c"))),(0,n.kt)("h3",{id:"lsm-tree\u7684\u6027\u80fd\u554f\u984c"},"LSM Tree\u7684\u6027\u80fd\u554f\u984c"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5728\u300c\u5b58\u53d6\u4e0d\u5b58\u5728\u7684\u8cc7\u6599\u300d\u6642\uff0c\u6548\u7387\u6703\u5f88\u6162"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u8981\u5148\u67e5memtable"),(0,n.kt)("li",{parentName:"ul"},"\u518d\u67e5\u7b2c\u4e00\u5c64\u7684Segments"),(0,n.kt)("li",{parentName:"ul"},"\u518d\u67e5\u4e0b\u4e00\u5c64\u7684Segments"),(0,n.kt)("li",{parentName:"ul"},"..."))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u9700\u8981 O(N)\u7684\u64cd\u4f5c")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5229\u7528 ",(0,n.kt)("a",{parentName:"p",href:"https://zh.wikipedia.org/zh-tw/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8"},"Bloom Filter \u5e03\u9686\u904e\u6ffe\u5668")," \u9032\u884c\u5354\u52a9"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Bloom filter \u662f\u4e00\u7a2e memory-efficient \u7684\u8cc7\u6599\u7d50\u69cb"),(0,n.kt)("li",{parentName:"ul"},"\u5982\u679c\u67e5\u8a62\u7d50\u679c\u8868\u793a\u8cc7\u6599\u4e0d\u5b58\u5728\uff0c\u90a3\u5c31\u4e00\u5b9a\u4e0d\u5b58\u5728"),(0,n.kt)("li",{parentName:"ul"},"\u5982\u679c\u67e5\u8a62\u7d50\u679c\u8aaa\u8cc7\u6599\u5b58\u5728\uff0c\u4e26\u4e0d\u80fd\u4fdd\u8b49\u8cc7\u6599\u300c\u771f\u7684\u300d\u5b58\u5728"),(0,n.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u88dc\u8db3 LSM Tree \u7684\u7f3a\u9ede")))),(0,n.kt)("h3",{id:"\u5c0f\u7d50"},"\u5c0f\u7d50"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Log structured \u7684\u5f15\u64ce\uff0c\u6709 Segment \uff0c\u9700\u8981\u5408\u4f75\u8207\u58d3\u7e2e"),(0,n.kt)("li",{parentName:"ul"},"\u4f7f\u7528 in-memory \u7684\u81ea\u5e73\u8861\u6a39\u4f5c\u70ba Buffer"),(0,n.kt)("li",{parentName:"ul"},"\u984d\u5916\u5728\u8a18\u61b6\u9ad4\u5167\u7dad\u8b77 Hash based \u7684\u7d22\u5f15\uff0c\u7528\u4f86\u4fdd\u5b58\u300c\u90e8\u5206\u7684\u300dkey \u7684offset\u4ee5\u63d0\u5347\u8b80\u53d6\u6548\u7387"),(0,n.kt)("li",{parentName:"ul"},"\u5d29\u6f70\u5fa9\u539f\u9700\u8981\u984d\u5916\u7684\uff0c\u5faa\u5e8f\u5beb\u5165\u7684 ",(0,n.kt)("inlineCode",{parentName:"li"},"Log")," \u4f86\u7dad\u6301"),(0,n.kt)("li",{parentName:"ul"},"\u8fd1\u4ee3\u5f88\u591a\u65b0\u8208\u7684\u8cc7\u6599\u5eab\uff0c\u90fd\u662f\u57fa\u65bcSSTable & LSMT \u7684\u7d50\u69cb",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Google Bigtable"),(0,n.kt)("li",{parentName:"ul"},"LevelDB"),(0,n.kt)("li",{parentName:"ul"},"RocksDB"),(0,n.kt)("li",{parentName:"ul"},"Cassendra"),(0,n.kt)("li",{parentName:"ul"},"HBase"),(0,n.kt)("li",{parentName:"ul"},"Lucene (Elasticsearch\u7684\u5e95\u5c64)"))),(0,n.kt)("li",{parentName:"ul"},"LSM Tree \u578b\u8cc7\u6599\u5eab\uff0c\u8b80\u5beb\u64cd\u4f5c\u7684\u5e73\u5747\u6642\u9593\u8907\u96dc\u5ea6",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Write:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Memtable: O(logN)"),(0,n.kt)("li",{parentName:"ul"},"Disk: O(1)"))),(0,n.kt)("li",{parentName:"ul"},"Read:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"O(logN)")))))),(0,n.kt)("h2",{id:"page-oriented-\u5206\u9801\u5c0e\u5411\u5f15\u64ce"},"Page Oriented \u5206\u9801\u5c0e\u5411\u5f15\u64ce"),(0,n.kt)("h3",{id:"b-tree"},"B-Tree"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5728\u8cc7\u6599\u5eab\u7684\u9818\u57df\uff0cBTree\u662f\u8f03\u6210\u719f\u7684\u7d22\u5f15\u5be6\u4f5c",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"1970\u5e74\u4ee3\u5c31\u51fa\u73fe"),(0,n.kt)("li",{parentName:"ul"},"\u300c\u50b3\u7d71\u300dDBMS\u4f7f\u7528\u7684\u8cc7\u6599\u7d50\u69cb",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"MySQL, PostgreSQL, Oracle, SQL Server, MongoDB...etc."))))),(0,n.kt)("li",{parentName:"ul"},"\u5c07\u8cc7\u6599\u5206\u6210\u300c\u56fa\u5b9a\u5927\u5c0f\u300d\u7684 Page\uff08\u6216\u7a31\u70baBlock\uff09",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Page \u4e00\u822c\u4f86\u8aaa\u70ba4KB\u6216\u66f4\u5927"),(0,n.kt)("li",{parentName:"ul"},"Page \u9023 Page\uff0c\u6240\u5f62\u6210\u7684\u6a39\u72c0\u7d50\u69cb"),(0,n.kt)("li",{parentName:"ul"},"\u6bcf\u6b21\u8b80\u53d6\u6216\u5beb\u5165\u90fd\u662f\u4ee5Page\u70ba\u55ae\u4f4d"),(0,n.kt)("li",{parentName:"ul"},"\u5c0d\u5e95\u5c64\u786c\u9ad4\u8a2d\u8a08\u66f4\u63a5\u8fd1",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u9019\u4e5f\u662f\u50b3\u7d71RDBMS\u5728\u67b6\u8a2d\u6642\uff0c\u4f5c\u696d\u7cfb\u7d71\u7684Disk format\u8981\u7d93\u904e\u8a2d\u8a08\u7684\u4e3b\u56e0"),(0,n.kt)("li",{parentName:"ul"},"ext4\u70ba\u4f8b\uff0c block\u53ef\u4ee5\u4ecb\u65bc 1~64KB")))))),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Btree",src:a(321).Z,width:"1150",height:"646"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"BTree\u5728\u5beb\u5165\u8cc7\u6599\u6642\uff0c\u9700\u8981\u5f9e root \u5f80\u4e0b\u67e5\u8a62\u627e\u5230\u8a72key\u6240\u5c6c\u7684Page\uff0c\u5c07value\u4fee\u6539\u5f8c\u6574\u500bpage\u5beb\u56de\u786c\u789f"),(0,n.kt)("li",{parentName:"ul"},"\u5982\u679c\u76ee\u6a19 Page \u5269\u9918\u7a7a\u9593\u4e0d\u8db3\uff0c\u9700\u8981\u9032\u884c\u300c\u5206\u652fBranching\u300d",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u300c\u5206\u652f\u300d\u6210\u5169\u500b\u534a\u6eff\u7684 Page\uff0c\u56e0\u6b64\u4fdd\u8b49\u4e86BTree\u7684\u5e73\u8861",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5b58\u653e ",(0,n.kt)("inlineCode",{parentName:"li"},"N")," \u7b46\u7d00\u9304\u7684BTree\uff0c\u6df1\u5ea6\u7e3d\u662f\u70ba O(logN)"))),(0,n.kt)("li",{parentName:"ul"},"BTree\u578b\u7684\u8cc7\u6599\u5eab\u5728\u5c0d\u300c\u5927\u91cf\u5beb\u5165\u8acb\u6c42\u300d\u6548\u7387\u8f03\u4f4e\u7684\u4e3b\u56e0")))),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"BTree",src:a(48067).Z,width:"1140",height:"658"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u4e00\u500b Page \u80fd\u5920\u64c1\u6709\u7684 Child Page \u6578\u91cf\u7a31\u70ba Branching Factor"),(0,n.kt)("li",{parentName:"ul"},"\u4ee5 Page size 4KB\uff0cBranching Factor 500 \u7684BTree\u4f86\u8aaa\uff0c\u53ef\u4ee5\u5b58\u653e 256TB \u7684\u8cc7\u6599"),(0,n.kt)("li",{parentName:"ul"},"\u56e0\u70ba\u6703\u76f4\u63a5\u300c\u66f4\u6539Page\u300d\u8907\u5beb\u539f\u6709\u7684\u8cc7\u6599\uff0c\u5c0d\u65bc\u4e26\u884c\u63a7\u5236\u8981\u5c0f\u5fc3\u8655\u7406")),(0,n.kt)("h3",{id:"\u5d29\u6f70\u8207\u56de\u5fa9-1"},"\u5d29\u6f70\u8207\u56de\u5fa9"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5728 BTree \u7684 Page \u4e4b\u9593\u64cd\u4f5c\u8cc7\u6599\uff0c\u82e5\u767c\u751f\u5d29\u6f70\uff0c\u6703\u5f97\u5230\u640d\u58de\u7684 BTree"),(0,n.kt)("li",{parentName:"ul"},"\u8ddfLSM Tree \u4e00\u6a23\uff0c\u70ba\u4e86\u5f9e\u5d29\u6f70\u4e2d\u5fa9\u539f\uff0c\u9700\u8981\u5728\u786c\u789f\u4e2d\u5beb\u5165\u984d\u5916\u7684\u8cc7\u6599\u7d50\u69cb",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u9810\u5beb\u65e5\u8a8c WAL (Write-ahead Log)"),(0,n.kt)("li",{parentName:"ul"},"\u53c8\u7a31\u70bare-do Log"),(0,n.kt)("li",{parentName:"ul"},"\u985e\u4f3c Event sourcing \u7684\u505a\u6cd5\uff0c\u5c0d\u5beb\u5165\u64cd\u4f5c\u505a\u7d00\u9304")))),(0,n.kt)("h3",{id:"btree\u7684\u6700\u4f73\u5316"},"BTree\u7684\u6700\u4f73\u5316"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"B+ Tree",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u70ba\u4e86\u7bc0\u7701\u7a7a\u9593\uff0c\u4e0d\u5132\u5b58\u5b8c\u6574\u7684key"),(0,n.kt)("li",{parentName:"ul"},"\u800c\u53ea\u6709\u5b58\u653ekey\u7684\u7e2e\u77ed\u7248\u672c"),(0,n.kt)("li",{parentName:"ul"},"\u5927\u90e8\u5206 BTree \u578b\u7684\u8cc7\u6599\u5eab\uff0c\u6240\u5be6\u969b\u4f7f\u7528\u7684\u8cc7\u6599\u7d50\u69cb"))),(0,n.kt)("li",{parentName:"ul"},"\u5c0d\u65bc range search \u7684\u6548\u7387\u4e0d\u597d",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u56e0\u70ba\u9700\u8981\u67e5\u6bcf\u500b\u5c0d\u61c9\u7684leaf pages"),(0,n.kt)("li",{parentName:"ul"},"\u5be6\u4f5c\u4e0a\uff0c\u5617\u8a66\u5c07leaf pages\u653e\u5728\u786c\u789f\u4e0a\u76f8\u9130\u7684\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u6e1b\u7de9\u5f71\u97ff"),(0,n.kt)("li",{parentName:"ul"},"\u9664\u4e86child page\u7684ref\u4e4b\u5916\uff0c\u984d\u5916\u6dfb\u52a0\u6307\u6a19\u5230\u6a39\u4e2d",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5144\u5f1f\u7684Page\u4e4b\u9593\u67e5\u627e\u7684\u6548\u7387\u6703\u8b8a\u597d\uff0c\u63d0\u5347\u5faa\u5e8f\u67e5\u8a62\u7684\u6548\u80fd")))))),(0,n.kt)("h2",{id:"b-tree-\u548c-lsm-tree-\u7684\u6bd4\u8f03"},"B-Tree \u548c LSM Tree \u7684\u6bd4\u8f03"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null}),(0,n.kt)("th",{parentName:"tr",align:null},"BTree"),(0,n.kt)("th",{parentName:"tr",align:null},"LSM Tree"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Read"),(0,n.kt)("td",{parentName:"tr",align:null},"O(logN)"),(0,n.kt)("td",{parentName:"tr",align:null},"O(logN)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Write"),(0,n.kt)("td",{parentName:"tr",align:null},"O(logN)"),(0,n.kt)("td",{parentName:"tr",align:null},"O(logN)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u5beb\u5165\u984d\u5916\u958b\u92b7"),(0,n.kt)("td",{parentName:"tr",align:null},"WAL + Tree + \u53ef\u80fd\u9700\u8981\u5206\u652f\u64cd\u4f5c"),(0,n.kt)("td",{parentName:"tr",align:null},"\u58d3\u7e2e\u8207\u5408\u4f75\u9020\u6210\u7684\u5beb\u5165\u653e\u5927")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u512a\u52e2"),(0,n.kt)("td",{parentName:"tr",align:null},"Transation\u5be6\u4f5c\u8f03\u7c21\u55ae\u3001\u6709\u66f4\u597d\u7684\u8b80\u53d6\u6548\u80fd"),(0,n.kt)("td",{parentName:"tr",align:null},"\u5faa\u5e8f\u5beb\u5165\u80fd\u7dad\u6301\u66f4\u9ad8\u7684\u5beb\u5165\u541e\u5410\u91cf\u3001\u7a7a\u9593\u5229\u7528\u7387\u9ad8\uff0c\u58d3\u7e2e\u5f97\u66f4\u597d")))),(0,n.kt)("h2",{id:"\u5176\u4ed6\u7d22\u5f15\u7d50\u69cb"},"\u5176\u4ed6\u7d22\u5f15\u7d50\u69cb"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"}," \u6b21\u7d22\u5f15 ")," \u4e5f\u5f88\u5e38\u898b"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(21403).Z,width:"637",height:"608"})),(0,n.kt)("p",null,"\u5982\u5716\uff0c\u53ef\u80fd\u5728user_id\u884c\u4e0a\u6709\u4e00\u500b\u6b21\u7d22\u5f15\uff0c\u9019\u6a23\u5c31\u53ef\u4ee5\u5728\u6bcf\u500b\u8868\u4e2d\u627e\u5230\u6240\u6709\u5c6c\u65bc\u540c\u4e00\u4f7f\u7528\u8005\u7684\u8cc7\u6599\u5217\u3002"),(0,n.kt)("h3",{id:"\u5728\u7d22\u5f15\u4e2d\u5132\u5b58\u503c"},"\u5728\u7d22\u5f15\u4e2d\u5132\u5b58\u503c"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u7d22\u5f15\u4e2d\u7684key\u662f\u67e5\u8a62\u6240\u6709\u641c\u5c0b\u7684\u6771\u897f\uff0c\u4f46\u662fvalue\u53ef\u4ee5\u662f:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5be6\u969b\u7684\u5217"),(0,n.kt)("li",{parentName:"ul"},"\u5176\u4ed6\u5730\u65b9\u7684\u5217\u53c3\u7167",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5132\u5b58\u5217\u7684\u4f4d\u7f6e\u7a31\u70ba\u5806\u7a4d\u6a94(heap file)")))))),(0,n.kt)("h3",{id:"\u591a\u884c\u7d22\u5f15"},"\u591a\u884c\u7d22\u5f15"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u7d44\u5408\u7d22\u5f15(concatenated index)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"(lastname, firstname)"),(0,n.kt)("li",{parentName:"ul"},"\u4e8c\u7dad\u4f4d\u7f6e\u8f49\u70ba\u55ae\u4e00\u6578\u5b57\u7576\u505a\u7d22\u5f15"),(0,n.kt)("li",{parentName:"ul"},"(red, green, blue)"),(0,n.kt)("li",{parentName:"ul"},"(date, temperature)")))),(0,n.kt)("h3",{id:"\u5168\u6587\u6aa2\u7d22\u548c\u6a21\u7cca\u7d22\u5f15"},"\u5168\u6587\u6aa2\u7d22\u548c\u6a21\u7cca\u7d22\u5f15"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u76ee\u524d\u7d22\u5f15\u90fd\u662f\u5047\u8a2d\u5df2\u6709\u660e\u78ba\u8cc7\u6599\uff0c\u53ef\u4ee5\u67e5\u8a62\u4e00\u500bkey\u5c0d\u61c9\u7684\u660e\u78ba\u503c\u3002\u7121\u6cd5\u641c\u5c0b\u76f8\u4f3c\u7684key\uff0c\u9019\u7a2e",(0,n.kt)("strong",{parentName:"p"},"\u6a21\u7cca(fuzzy)"),"\u67e5\u8a62\u9700\u8981\u4e0d\u540c\u7684\u6280\u8853\u3002")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4f8b\u5982\uff0c",(0,n.kt)("a",{parentName:"p",href:"https://lucene.apache.org/"},"Lucene")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Lucene\u662f\u652f\u6301\u5168\u6587\u6aa2\u7d22\u548c\u641c\u5c0b\u7684\u958b\u653e\u539f\u59cb\u78bc\u7a0b\u5f0f\u5eab\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u80fd\u5728\u4e00\u5b9a\u7684\u7de8\u8f2f\u8ddd\u96e2\u5167\u641c\u5c0b\u6587\u672c\u4e2d\u7684\u55ae\u5b57",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u7de8\u8f2f\u8ddd\u96e2\u70ba1\u8868\u793a\u5df2\u7d93\u6dfb\u52a0\u3001\u522a\u9664\u6216\u66ff\u63db\u4e86\u4e00\u500b\u5b57\u6bcd")))))),(0,n.kt)("h3",{id:"\u5c07\u6240\u6709\u7684\u6771\u897f\u5b58\u653e\u5728\u8a18\u61b6\u9ad4"},"\u5c07\u6240\u6709\u7684\u6771\u897f\u5b58\u653e\u5728\u8a18\u61b6\u9ad4"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"SSD\u6210\u672c\u8f03RAM\u4f4e\u8a31\u591a\uff0c\u4e14\u8cc7\u6599\u662f\u6301\u4e45\u5316\u7684"),(0,n.kt)("li",{parentName:"ul"},"\u7576RAM\u4fbf\u5b9c\uff0cdatasets\u5c0f\uff0c\u662f\u6709\u53ef\u80fd\u5c07\u8cc7\u6599\u5eab\u4fdd\u7559\u5728\u8a18\u61b6\u9ad4\u4e2d",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u8a18\u61b6\u9ad4\u8cc7\u6599\u5eab(in-memory database)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"ex: key-value store\u7684",(0,n.kt)("a",{parentName:"li",href:"https://zh.wikipedia.org/zh-tw/Memcached"},"Memcached"),"\uff0c\u4e3b\u8981\u7528\u505a\u5feb\u53d6"))),(0,n.kt)("li",{parentName:"ul"},"\u90e8\u4efdin-memory database\u6709\u7279\u6b8a\u786c\u9ad4\uff0c\u53ef\u4ee5\u5be6\u73fe\u8cc7\u6599\u6301\u4e45\u6027"),(0,n.kt)("li",{parentName:"ul"},"\u7576in-memory database\u91cd\u555f\u6642\uff0c\u9700\u8981\u900f\u904e\u4e00\u500b\u8cc7\u6599\u526f\u672c\uff0c\u91cd\u65b0\u8f09\u5165\u5b83\u7684\u72c0\u614b")))),(0,n.kt)("h2",{id:"\u4ea4\u6613\u8655\u7406\u9084\u662f\u5206\u6790\u8655\u7406"},"\u4ea4\u6613\u8655\u7406\u9084\u662f\u5206\u6790\u8655\u7406\uff1f"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u7dda\u4e0a\u4ea4\u6613\u8655\u7406(Online Transaction Processing)"),(0,n.kt)("li",{parentName:"ul"},"\u7dda\u4e0a\u5206\u6790\u8655\u7406(Online Analytic Processing)")),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"\u4ea4\u6613\u4e0d\u4e00\u5b9a\u8981\u5177\u6709ACID(\u539f\u5b50\u6027\u3001\u4e00\u81f4\u6027\u3001\u9694\u96e2\u6027\u548c\u6301\u4e45\u6027)\u5c6c\u6027\u3002\u4ea4\u6613\u8655\u7406(transaction processing)\u50c5\u50c5\u610f\u5473\u8457\u53ef\u4ee5\u8b93\u5ba2\u6236\u7aef\u9032\u884c\u4f4e\u5ef6\u9072\u7684\u8b80\u5beb\uff0c\u800c\u5206\u6279\u6b21\u8655\u7406(batch processing)\u4f5c\u696d\uff0c\u5f8c\u8005\u53ea\u6703\u5b9a\u671f\u904b\u884c(\u4f8b\u5982\u6bcf\u5929\u4e00\u6b21)\u3002\u6211\u5011\u5c07\u5728\u7b2c7\u7ae0\u8a0e\u8ad6ACID\u7684\u6027\u8cea\uff0c\u5728\u7b2c10\u7ae0\u8a0e\u8ad6\u6279\u6b21\u8655\u7406\u3002"),(0,n.kt)("hr",{parentName:"admonition"}),(0,n.kt)("p",{parentName:"admonition"},"\u539f\u5b50\u6027(Atomicity):\u4e00\u500b\u4e8b\u52d9\uff08transaction\uff09\u4e2d\u7684\u6240\u6709\u64cd\u4f5c\uff0c\u6216\u8005\u5168\u90e8\u5b8c\u6210\uff0c\u6216\u8005\u5168\u90e8\u4e0d\u5b8c\u6210\uff0c\u4e0d\u6703\u7d50\u675f\u5728\u4e2d\u9593\u67d0\u500b\u74b0\u7bc0\u3002\u4e8b\u52d9\u5728\u57f7\u884c\u904e\u7a0b\u4e2d\u767c\u751f\u932f\u8aa4\uff0c\u6703\u88ab\u56de\u6efe\uff08Rollback\uff09\u5230\u4e8b\u52d9\u958b\u59cb\u524d\u7684\u72c0\u614b\uff0c\u5c31\u50cf\u9019\u500b\u4e8b\u52d9\u5f9e\u4f86\u6c92\u6709\u57f7\u884c\u904e\u4e00\u6a23\u3002\u5373\uff0c\u4e8b\u52d9\u4e0d\u53ef\u5206\u5272"),(0,n.kt)("p",{parentName:"admonition"},"\u4e00\u81f4\u6027(Consistency):\u5728\u4e8b\u52d9\u958b\u59cb\u4e4b\u524d\u548c\u4e8b\u52d9\u7d50\u675f\u4ee5\u5f8c\uff0c\u8cc7\u6599\u5eab\u7684\u5b8c\u6574\u6027\u6c92\u6709\u88ab\u7834\u58de\u3002\u9019\u8868\u793a\u5beb\u5165\u7684\u8cc7\u6599\u5fc5\u9808\u5b8c\u5168\u7b26\u5408\u6240\u6709\u7684\u9810\u8a2d\u7d04\u675f\u3001\u89f8\u767c\u5668\u3001\u7d1a\u806f\u56de\u6efe\u7b49"),(0,n.kt)("p",{parentName:"admonition"},"\u4e8b\u52d9\u9694\u96e2(Isolation):\u8cc7\u6599\u5eab\u5141\u8a31\u591a\u500b\u4e26\u767c\u4e8b\u52d9\u540c\u6642\u5c0d\u5176\u6578\u64da\u9032\u884c\u8b80\u5beb\u548c\u4fee\u6539\u7684\u80fd\u529b\uff0c\u9694\u96e2\u6027\u53ef\u4ee5\u9632\u6b62\u591a\u500b\u4e8b\u52d9\u4e26\u767c\u57f7\u884c\u6642\u7531\u65bc\u4ea4\u53c9\u57f7\u884c\u800c\u5c0e\u81f4\u6578\u64da\u7684\u4e0d\u4e00\u81f4\u3002\u4e8b\u52d9\u9694\u96e2\u5206\u70ba\u4e0d\u540c\u7d1a\u5225\uff0c\u5305\u62ec\u672a\u63d0\u4ea4\u8b80\uff08Read uncommitted\uff09\u3001\u63d0\u4ea4\u8b80\uff08read committed\uff09\u3001\u53ef\u91cd\u8907\u8b80\uff08repeatable read\uff09\u548c\u4e32\u884c\u5316\uff08Serializable\uff09"),(0,n.kt)("p",{parentName:"admonition"},"\u6301\u4e45\u6027(Durability):\u4e8b\u52d9\u8655\u7406\u7d50\u675f\u5f8c\uff0c\u5c0d\u6578\u64da\u7684\u4fee\u6539\u5c31\u662f\u6c38\u4e45\u7684\uff0c\u5373\u4fbf\u7cfb\u7d71\u6545\u969c\u4e5f\u4e0d\u6703\u4e1f\u5931")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"\u5c6c\u6027"),(0,n.kt)("th",{parentName:"tr",align:null},"\u4ea4\u6613\u8655\u7406\u7cfb\u7d71(OLTP)"),(0,n.kt)("th",{parentName:"tr",align:null},"\u5206\u6790\u7cfb\u7d71(OLAP)"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u4e3b\u8981\u7684\u8b80\u53d6\u6a21\u5f0f"),(0,n.kt)("td",{parentName:"tr",align:null},"\u6bcf\u6b21\u67e5\u8a62\u5c11\u91cf\u8a18\u9304\uff0c\u6839\u64dakey\u4f86\u53d6\u5f97\u8cc7\u6599"),(0,n.kt)("td",{parentName:"tr",align:null},"\u805a\u5408\u5927\u91cf\u7684\u8a18\u9304")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u4e3b\u8981\u7684\u5beb\u5165\u6a21\u5f0f"),(0,n.kt)("td",{parentName:"tr",align:null},"\u96a8\u6a5f\u5b58\u53d6\uff0c\u5f9e\u4f7f\u7528\u8005\u8f38\u5165\u5230\u5beb\u5165\u8cc7\u6599\u5eab\u7684\u5ef6\u9072\u4f4e"),(0,n.kt)("td",{parentName:"tr",align:null},"\u5927\u91cf\u532f\u5165(ETL)\u6216\u4e8b\u4ef6\u6d41")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u4e3b\u8981\u4f7f\u7528\u8005"),(0,n.kt)("td",{parentName:"tr",align:null},"\u7d42\u7aef\u4f7f\u7528\u8005/\u5ba2\u6236\uff0c\u900f\u904eweb\u61c9\u7528"),(0,n.kt)("td",{parentName:"tr",align:null},"\u5167\u90e8\u4efd\u6790\u4eba\u54e1\uff0c\u652f\u63f4\u6c7a\u7b56")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u8cc7\u6599\u610f\u542b"),(0,n.kt)("td",{parentName:"tr",align:null},"\u8cc7\u6599\u7684\u6700\u65b0\u72c0\u614b(\u7576\u524d\u6642\u523b)"),(0,n.kt)("td",{parentName:"tr",align:null},"\u904e\u5f80\u767c\u751f\u7684\u4e8b\u4ef6\u6b77\u53f2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"\u8cc7\u6599\u96c6\u5927\u5c0f"),(0,n.kt)("td",{parentName:"tr",align:null},"GB ~ TB"),(0,n.kt)("td",{parentName:"tr",align:null},"TB ~ PB")))),(0,n.kt)("h3",{id:"\u8cc7\u6599\u5009\u5132"},"\u8cc7\u6599\u5009\u5132"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"ETL (extract, transform, load)"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("img",{src:a(89688).Z,width:"642",height:"491"}))),(0,n.kt)("h3",{id:"oltp\u8cc7\u6599\u5eab\u548c\u8cc7\u6599\u5009\u5132\u4e4b\u9593\u7684\u5dee\u7570"},"OLTP\u8cc7\u6599\u5eab\u548c\u8cc7\u6599\u5009\u5132\u4e4b\u9593\u7684\u5dee\u7570"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u56e0SQL\u9069\u5408\u5206\u6790\u67e5\u8a62\uff0c\u8cc7\u6599\u5009\u5132\u5e38\u63d0\u4f9bSQL\u7684\u4ecb\u9762\u3002",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"OLTP\u4e5f\u5e38\u5177\u6709SQL\u67e5\u8a62\u4ecb\u9762\uff0c\u6b64\u7279\u6027\u76f8\u4f3c"))),(0,n.kt)("li",{parentName:"ul"},"\u4f46\u5169\u8005\u7cfb\u7d71\u5167\u90e8\u91dd\u5c0d\u8fe5\u7136\u4e0d\u540c\u7684\u67e5\u8a62\u6a21\u5f0f\u9032\u884c\u6700\u4f73\u5316\u3002")),(0,n.kt)("h2",{id:"\u661f\u72c0\u8207\u96ea\u82b1\u7528\u65bc\u5206\u6790\u7684\u57fa\u6a21"},"\u661f\u72c0\u8207\u96ea\u82b1:\u7528\u65bc\u5206\u6790\u7684\u57fa\u6a21"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("img",{src:a(18442).Z,width:"647",height:"663"})),(0,n.kt)("li",{parentName:"ul"},"\u4ee5\u4e00\u500b",(0,n.kt)("strong",{parentName:"li"},"\u4e8b\u5be6\u8868(fact table)"),"\u70ba\u4e2d\u5fc3")),(0,n.kt)("h2",{id:"\u884c\u5f0f\u5132\u5b58column-oriented-storage"},"\u884c\u5f0f\u5132\u5b58(column-oriented storage)"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(18182).Z,width:"645",height:"483"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"fact table\u7684\u6b04\u4f4d\u6578\u91cf\u901a\u5e38\u8d85\u904e100\u500b\uff0c\u4f46\u901a\u5e38\u6bcf\u4e00\u6b21\u53ea\u6703\u5b58\u53d64\u30015\u500b\u6b04\u4f4d")),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"\u884c\u5f0f\u5132\u5b58\u5728relational data model\u4e2d\u662f\u6700\u5bb9\u6613\u7406\u89e3\u7684\uff0c\u4e0d\u904e\u5b83\u4e5f\u540c\u6a23\u9069\u7528\u65bc\u975e\u95dc\u806f\u8cc7\u6599\u3002\u4f8b\u5982\uff0cParquet\u662f\u4e00\u7a2e\u652f\u63f4document data model\u7684\u884c\u5132\u5b58\u683c\u5f0f\uff0c\u5b83\u662f\u57fa\u65bcGoogle\u7684Dremel\u3002")),(0,n.kt)("h3",{id:"\u884c\u58d3\u7e2e"},"\u884c\u58d3\u7e2e"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(57461).Z,width:"646",height:"480"})),(0,n.kt)("admonition",{title:"\u884c\u5f0f\u5132\u5b58\u53ca\u6b04\u65cf",type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Cassandra\u548cHBase\u6709\u4e00\u500b\u7a31\u70ba\u6b04\u65cf(column families)\u7684\u6982\u5ff5\uff0c\u6e90\u65bcGoogle Bigtable\u3002\u4f46\u662f\uff0c\u5c07\u5b83\u5011\u7a31\u4f5c\u662fcolumn-oriented\u7684\u8a71\u6050\u6015\u5c31\u6709\u8aa4\u6703\u4e86:\u5728\u6bcf\u500b\u6b04\u65cf\u4e2d\uff0c\u5b83\u5011\u5c07\u4e00\u5217\u4e2d\u7684\u6240\u6709\u884c\u9023\u540c\u4e00\u500brow key\u4e00\u8d77\u5132\u5b58\u8d77\u4f86\uff0c\u800c\u4e14\u5b83\u5011\u4e5f\u4e0d\u4f7f\u7528\u884c\u58d3\u7e2e\u3002\u56e0\u6b64\uff0cBigtable\u6a21\u578b\u4e3b\u8981\u4ecd\u662frow-oriented\u7684\u3002")),(0,n.kt)("h4",{id:"\u8a18\u61b6\u9ad4\u983b\u5bec\u8207\u5411\u91cf\u5316\u8655\u7406"},"\u8a18\u61b6\u9ad4\u983b\u5bec\u8207\u5411\u91cf\u5316\u8655\u7406"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u884c\u5f0f\u5132\u5b58",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u6e1b\u5c11\u4e86\u9700\u8981\u5f9e\u78c1\u789f\u8f09\u5165\u7684\u8cc7\u6599\u91cf"),(0,n.kt)("li",{parentName:"ul"},"\u53ef\u5c07\u58d3\u7e2e\u904e\u7684\u884c\u8cc7\u6599\u653e\u5230CPU L1\u5feb\u53d6\uff0c\u9032\u884c\u55ae\u7d14\u56de\u5708\u7684\u8fed\u4ee3\u904b\u7b97\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u7528AND / OR\u76f4\u63a5\u64cd\u4f5c\u9019\u4e9b\u8cc7\u6599\u584a\u3002\u7a31\u70ba",(0,n.kt)("strong",{parentName:"li"},"\u5411\u91cf\u5316\u8655\u7406(vectorized processing)"))))),(0,n.kt)("h3",{id:"\u884c\u5132\u5b58\u4e2d\u7684\u6392\u5e8f"},"\u884c\u5132\u5b58\u4e2d\u7684\u6392\u5e8f"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5728\u884c\u5f0f\u5132\u5b58\u4e2d",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5217\u7684\u5b58\u653e\u9806\u5e8f\u4e26\u4e0d\u91cd\u8981"),(0,n.kt)("li",{parentName:"ul"},"\u55ae\u7368\u5c0d\u67d0\u4e00\u5217\u505a\u6392\u5e8f\u662f\u6c92\u6709\u610f\u7fa9\u7684"),(0,n.kt)("li",{parentName:"ul"},"\u4f9d\u64da\u7d93\u5e38\u5b58\u53d6\u7684\u6b04\u4f4d\u9032\u884c\u6392\u5e8f\uff0c\u53ef\u63d0\u5347\u6548\u80fd"),(0,n.kt)("li",{parentName:"ul"},"\u6392\u5e8f\u5f8c\u6709\u52a9\u65bc\u58d3\u7e2e")))),(0,n.kt)("h4",{id:"\u5e7e\u7a2e\u4e0d\u540c\u7684\u6392\u5e8f\u9806\u5e8f"},"\u5e7e\u7a2e\u4e0d\u540c\u7684\u6392\u5e8f\u9806\u5e8f"),(0,n.kt)("p",null,"\u4e0d\u540c\u7684\u67e5\u8a62\u53d7\u76ca\u65bc\u4e0d\u540c\u7684\u6392\u5e8f\u9806\u5e8f\u3002"),(0,n.kt)("h3",{id:"\u884c\u5f0f\u5132\u5b58\u7684\u5beb\u64cd\u4f5c"},"\u884c\u5f0f\u5132\u5b58\u7684\u5beb\u64cd\u4f5c"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u884c\u5f0f\u5132\u5b58\uff0c\u63d0\u9ad8\u4e86\u3001\u58d3\u7e2e\u548c\u6392\u5e8f\u90fd\u6709\u52a9\u65bc\u63d0\u9ad8\u67e5\u8a62\u7684\u8b80\u53d6\u901f\u5ea6\u3002\u4f46\u4e5f\u589e\u52a0\u5beb\u5165\u96e3\u5ea6\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u884c\u5f0f\u5132\u5b58\u4e2d\uff0c\u6bcf\u63d2\u5165\u4e00\u7b46\u8cc7\u6599\uff0c\u5c31\u8981\u66f4\u65b0\u6240\u6709\u7684\u884c\u6a94\u6848"),(0,n.kt)("li",{parentName:"ul"},"\u53ef\u53c3\u8003LSM-tree\u9032\u884c\u5beb\u7684\u64cd\u4f5c\u3002",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u6240\u6709\u5beb\u64cd\u4f5c\u9032\u5165in-memory store\uff0c\u6dfb\u52a0\u5230\u6392\u5e8f\u7684\u7d50\u69cb\u4e2d"),(0,n.kt)("li",{parentName:"ul"},"\u7d2f\u7a4d\u8db3\u5920\u7684\u5beb\u5165\u6642\uff0c\u8207\u78c1\u789f\u7684\u884c\u6a94\u9032\u884c\u5408\u4f34\uff0c\u6279\u6b21\u5beb\u5165\u65b0\u6a94")))),(0,n.kt)("h2",{id:"\u805a\u5408\u8cc7\u6599\u65b9\u9ad4\u8207\u5be6\u9ad4\u5316\u8996\u5716"},"\u805a\u5408:\u8cc7\u6599\u65b9\u9ad4\u8207\u5be6\u9ad4\u5316\u8996\u5716"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(10267).Z,width:"635",height:"378"})),(0,n.kt)("p",null,"\u884c\u5f0f\u5132\u5b58\u5c0d\u65bc\u5206\u6790\u67e5\u8a62\uff0c\u6548\u7387\u66f4\u4f73\u3002\n\u4f46\u91dd\u5c0d\u76f8\u540c\u7684SQL\u67e5\u8a62\u7d44\u5408\uff0c\u5982SUM, COUNT, AVG...\n\u6bcf\u6b21\u90fd\u8981\u8655\u7406\u539f\u59cb\u8cc7\u6599\u6703\u9020\u6210\u6d6a\u8cbb\u3002\n\u6545\u5275\u5efa\u4e00\u7a2e\u5feb\u53d6\u7a31\u505a",(0,n.kt)("strong",{parentName:"p"},"\u5be6\u9ad4\u5316\u8996\u5716(Materialized View)")),(0,n.kt)("p",null,"\u5716\u4f8b\u70ba\u4e00\u500b",(0,n.kt)("strong",{parentName:"p"},"\u8cc7\u6599\u65b9\u9ad4(data cube)"),"\uff0c\u6311\u9078date\u53caproduct\u5169\u500b\u7dad\u5ea6\uff0c\u91dd\u5c0d\u7e3d\u548c\u9032\u884c\u4e00\u7a2e\u5feb\u53d6\u3002"),(0,n.kt)("h2",{id:"\u5c0f\u7d50-1"},"\u5c0f\u7d50"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5132\u5b58\u5f15\u64ce\u5206\u5169\u5927\u985e"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"OLTP (Online Transaction Processing)"),(0,n.kt)("li",{parentName:"ul"},"\u8cc7\u6599\u5009\u5132\u53ca\u985e\u4f3c\u7684\u5206\u6790\u7cfb\u7d71"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"OLTP\u7684\u5169\u7a2e\u6d41\u6d3e"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u65e5\u8a8c\u7d50\u69cb\u6d3e",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"SSTables (Sorted String Tables)"),(0,n.kt)("li",{parentName:"ul"},"LSM-Tree (Log-Structured Merge-Tree)"))),(0,n.kt)("li",{parentName:"ul"},"\u539f\u5730\u66f4\u65b0\u6d3e",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"B-Tree"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u66f4\u8907\u96dc\u7684\u7d22\u5f15\u7d50\u69cb"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u591a\u884c\u7d22\u5f15"),(0,n.kt)("li",{parentName:"ul"},"\u5168\u6587\u6aa2\u7d22\u548c\u6a21\u7cca\u7d22\u5f15"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4f7f\u7528\u884c\u5f0f\u5132\u5b58\u4f86\u964d\u4f4e\u78c1\u789f\u8b80\u53d6\u7684\u8cc7\u6599\u91cf"))))}c.isMDXComponent=!0},21403:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/fig2_1-cd5b6e49a5a1587babcc0a7e7619b8a4.png"},27018:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/fig3_1-f05a043cbfa28ef317ad55034f9697bc.png"},18182:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/fig3_10-6f8f21fabc69dc77ecd9a6f443909990.png"},57461:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/fig3_11-20200314f3a0f4dae00f531150829dd5.png"},10267:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/fig3_12-9b9372448d5ab2211496cf2125c3a497.png"},72129:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/fig3_4-fd4c6d8fa4d408ca02c799f913d8104f.png"},92510:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/fig3_5-e3aadfe9ad3907faea209ee9cda52af6.png"},321:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/fig3_6-743b7bbd1a219bb2b83eb3d6d3070c7c.png"},48067:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/fig3_7-d89faef26d834f27461454166246ba90.png"},89688:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/fig3_8-724b0b224482fda224d1d458b9e8ee04.png"},18442:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/fig3_9-9aa4b5b3ace00b5f4f48202e782c113c.png"},4981:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/lsmt-f22edefd1ebfbd46e8cb5c892b9064f0.jpg"}}]);