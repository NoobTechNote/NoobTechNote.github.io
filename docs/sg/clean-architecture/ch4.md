---
title: 'Ch4: çµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆ'
sidebar_label: 'Ch4: çµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆ'
sidebar_position: 4
---

## å‰è¨€

> -   é€™æœ¬æ›¸æ˜¯åœ¨è¬›æ¶æ§‹ï¼Œç‚ºä»€éº¼è¬›åˆ°ç¯„å¼ï¼Ÿ
>
> -   èˆ‡æ¶æ§‹çš„é—œè¯ï¼Ÿ

å›åˆ° Ch1.

-   **æ¶æ§‹**ï¼šå¾è¼ƒå®è§€çš„è§’åº¦å»çœ‹

    -   æˆ¿å­çš„æ¨£è²Œï¼Œæ ¼å±€

-   **è¨­è¨ˆ**ï¼š å¾è¼ƒå¾®è§€çš„è§’åº¦çœ‹
    -   æˆ¿å­çš„ç‡ˆï¼Œæ’åº§ä½ç½®

èˆ‰å€‹å‰ç«¯çš„ä¾‹å­ï¼š  
ç•¶æ”¶åˆ°ä¸€å€‹ requirement....

React App Architecture:  
![react-redux-architecture](./img/react-redux-architecture.png)

æˆ‘å€‘å¯¦éš›ä¸Šåœ¨å¯«çš„ï¼š

```tsx
// React Functional Components
// What we really write.

export const App = () => {
	return <Component message="world!" />
}

export const Component = ({ message }) => {
	return <h1>Hello ${message}</h1>
}
```

```tsx
// Another Class components example

export default class App extends React.Component {
	constructor(props) {
		super(props)
		this.state = {
			// ...
		}
	}

	render() {
		return <Component message="world!" />
	}
}

export default class Component extends React.Component {
	constructor(props) {
		super(props)
		this.state = {
			// ...
		}
	}

	render() {
		return <h1>Hello ${this.props.message}</h1>
	}
}
```

-   ç¯„å¼æ‰€è«‡è«–çš„æ˜¯**_ç¨‹å¼è¨­è¨ˆ_**çš„æ–¹å¼ï¼Œèˆ‡èªè¨€ç„¡é—œã€‚  
    ä¾‹å¦‚ javascript å¯ä»¥ç”¨ OOPï¼Œæˆ–æ˜¯ FP çš„æ–¹å¼ä¾†å¯«

-   æ¶æ§‹èˆ‡è¨­è¨ˆéƒ½æ˜¯æ•´å€‹è»Ÿé«”(æˆ¿å­)çš„ä¸€éƒ¨ä»½

ä¸‰ç¨®ç¯„å¼ï¼š

-   çµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆ(structured programming)
-   ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ(object-orient programming)
-   å‡½æ•¸å¼ç¨‹å¼è¨­è¨ˆ(functional programming)

> _æ¶æ§‹çš„ä¸‰å¤§é—œæ³¨é»ï¼š **å‡½å¼**ã€**å…ƒä»¶åˆ†é›¢**ã€**è³‡æ–™ç®¡ç†**_  
> (åŸæ–‡ç‚º functionï¼Œæ‡‰å¯è§£é‡‹ç‚º**_åŠŸèƒ½_**)

---

## çµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆ

> å°‡ä¸€çµ„ç¨‹å¼æ‹†è§£æˆä¸€çµ„ä¸€çµ„å°çš„å¯è­‰æ˜çš„åŠŸèƒ½ï¼Œç„¶å¾Œæˆ‘å€‘ä½¿ç”¨*æ¸¬è©¦*ä¾†è©¦åœ–è­‰æ˜é€™äº›åŠŸèƒ½æ˜¯ä¸æ­£ç¢ºçš„ã€‚  
> å¦‚æœæ¸¬è©¦ä¸èƒ½è­‰æ˜ä»–å€‘æ˜¯ä¸æ­£ç¢ºçš„ï¼Œé‚£æˆ‘å€‘å°±å¯ä»¥èªç‚ºé€™äº›åŠŸèƒ½å°æˆ‘å€‘çš„ç›®çš„ä¾†èªªæ˜¯æ­£ç¢ºçš„ã€‚

### æ­·å²ç·£ç”±

åœ¨æ—©æœŸçœŸç©ºç®¡æ™‚ä»£ï¼Œé›»è…¦ç¨‹å¼æ˜¯ç”¨äºŒé€²åˆ¶æˆ–ç²—ç³™çš„çµ„åˆèªè¨€ç·¨å¯«ã€‚ä½¿ç”¨çš„æ˜¯ç´™å¸¶æˆ–æ‰“å­”å¡ã€‚ä»»ä½•è¤‡é›œçš„ç¨‹å¼éƒ½åŒ…å«å¤ªå¤šç´°ç¯€ã€‚åœ¨çœ‹ä¼¼å¯è¡Œçš„ç¨‹å¼è£¡ï¼Œå·¥ç¨‹å¸«åªèƒ½ä¿¯ç°ä¸€å€‹å°ç´°ç¯€çš„æˆæœï¼Œä½†çµæœå¸¸å¸¸æ˜¯å¤±æ•—ã€‚

Dijkstra å¸Œæœ›é€éæ•¸å­¸åŸç†ä¸Šçš„**_è­‰æ˜_**ä¾†è§£æ±ºé€™å€‹å•é¡Œã€‚

![tape](./img/60mtape.jpeg)
![tape](./img/60ptape.jpeg)

### è­‰æ˜

Dijkstra èªç‚ºå¯ä»¥ç”¨æ•¸å­¸è£¡çš„**_å±¤æ¬¡çµæ§‹_**ä¾†è­‰æ˜ç¨‹å¼æ˜¯æ­£ç¢ºçš„ã€‚  
ä¹Ÿå°±æ˜¯èªªï¼Œç¨‹å¼è¨­è¨ˆå¸«å°‡å·²ç¶“è­‰æ˜éçš„çµæ§‹ï¼Œä¸¦å°‡ä»–å€‘èˆ‡ç¨‹å¼ç¢¼ç¶åœ¨ä¸€èµ·ï¼Œç„¶å¾Œè‡ªè¡Œè­‰æ˜ä»–å€‘æ˜¯æ­£ç¢ºçš„ã€‚
![math](./img/math.jpeg)

### goto èªå¥

Dijkstra ç™¼ç¾`goto` èªå¥çš„æŸäº›ç”¨æ³•æœƒé˜»æ­¢æ¨¡çµ„è¢«åˆ†è§£æˆè¶Šä¾†è¶Šå°çš„å–®å…ƒï¼Œé€™æ¨£æœƒç„¡æ³•ä½¿ç”¨ [divide-and-conquer][divide-and-conquer-link]çš„æ–¹æ³•ä¾†åˆç†è­‰æ˜ã€‚

ä½†æ˜¯æœ‰äº›ä½¿ç”¨æ–¹å§‹æ²’æœ‰é€™å€‹å•é¡Œï¼Œè€Œé€™äº›ä½¿ç”¨æ–¹å¼æœƒå°æ‡‰åˆ°ç°¡å–®çš„æ§åˆ¶çµæ§‹ï¼ŒåŒ…å«ï¼šif/then/else å’Œ do/whileã€‚

æ¨¡çµ„å¦‚æœ**åªä½¿ç”¨**é€™é¡å‹çš„æ§åˆ¶çµæ§‹ï¼Œå°±å¯ä»¥è¢«éè¿´ç´°åˆ†ç‚ºå¯è­‰æ˜çš„å–®å…ƒã€‚

![goto](./img/goto.png)

![sp](./img/sp.jpeg)

_Ref: [What is wrong with using goto?][what-is-wrong-with-using-goto]_

### èˆ‡å¾ªåºåŸ·è¡Œçµåˆ

Dijkstra ç™¼ç¾é€™äº›æ§åˆ¶çµæ§‹èˆ‡å¾ªåºåŸ·è¡Œçµåˆæ™‚ï¼Œæ˜¯éå¸¸ç‰¹æ®Šã€‚è€Œ

Bohm èˆ‡ Jacopini è­‰æ˜äº†æ‰€æœ‰ç¨‹å¼éƒ½å¯ä»¥ä½¿ç”¨ä¸‰ç¨®çµæ§‹å»ºæ§‹å‡ºä¾†(å¯ä»¥è¢«è­‰æ˜)ï¼Œåˆ†åˆ¥æ˜¯ï¼š

-   å¾ªåº(sequence)
-   é¸æ“‡(selection)
-   [è¿­ä»£(iteration)][iteration]
    (ç¶²è·¯æŸ¥æ˜¯éè¿´ï¼Œè¿´åœˆ)

> åŸæ–‡ï¼šå»ºæ§‹å¯è­‰æ¨¡çµ„çš„æ§åˆ¶çµæ§‹å°±æ˜¯*å¯å»ºæ§‹æ‰€æœ‰åŸå¸‚çš„æ§åˆ¶çµæ§‹*çš„æœ€å°é›†åˆï¼Œå› æ­¤çµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆèª•ç”Ÿäº†ã€‚  
> æ›å¥è©±èªªï¼š æ‰€æœ‰ç¨‹å¼çš„å¯ä»¥ç”±å¾ˆå¤šå€‹å°çš„å¯ä»¥è¢«è­‰æ˜çš„ç¨‹å¼æ‰€çµ„æˆã€‚

|                 å¾ªåºçµæ§‹                  |                  é¸æ“‡çµæ§‹                   |                è¿­ä»£çµæ§‹æ§‹                 |
| :---------------------------------------: | :-----------------------------------------: | :---------------------------------------: |
| ![sequence-structure](./img/sequence.png) | ![selection-structure](./img/selection.png) | ![repeater-structure](./img/repeater.png) |

### çµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆçš„è­‰æ˜

-   å¾ªåº(sequence)
    -   é€éç°¡å–®ä¾†åˆ—èˆ‰ï¼š ç”±å¾ªåºè¼¸å…¥è¿½è¹¤åˆ°å¾ªåºè¼¸å‡ºã€‚
-   é¸æ“‡(selection)
    -   ä½¿ç”¨åˆ—èˆ‰ä¾†è­‰æ˜ï¼š å°‡é¸æ“‡çš„æ¯æ¢è·¯å¾‘éƒ½åˆ—èˆ‰å‡ºä¾†ï¼Œå¦‚æœå…©æ¢è·¯å¾‘æœ€çµ‚éƒ½ç”¢ç”Ÿäº†æ°ç•¶çš„æ•¸å­¸çµæœï¼Œå‰‡è­‰æ˜å°±æ˜¯å¯é çš„ã€‚
-   [è¿­ä»£(iteration)][iteration]
    -   ä½¿ç”¨æ•¸å­¸æ­¸ç´æ³•ï¼š å…ˆé€éåˆ—èˆ‰è­‰æ˜ 1 çš„æƒ…æ³ï¼Œç„¶å¾Œå†æ¬¡é€éåˆ—èˆ‰ï¼Œè­‰æ˜å¦‚æœ N å‡å®šæ˜¯æ­£ç¢ºçš„ï¼Œé‚£éº¼ N+1 å°±æ˜¯æ­£ç¢ºçš„ã€‚

### å¤§å‹ç¨‹å¼åŠŸèƒ½åˆ†è§£

å› ç‚ºçµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆå…è¨±å°‡æ¨¡çµ„åˆ†è§£æˆä¸€å€‹å€‹çš„å¯è­‰æ˜çš„å–®å…ƒï¼Œæ‰€ä»¥åªè¦ç¨‹å¼è¨­è¨ˆå¸«éµå¾ªé€™äº›é™åˆ¶è¦å‰‡(åƒè€ƒ [goto](#goto-èªå¥))ï¼Œ  
å°±å¯ä»¥å°‡å¤§å‹çš„ç³»çµ±ï¼Œåˆ†è§£æˆä¸€å€‹å€‹å¾®å°çš„ã€å¯è­‰æ˜åŠŸèƒ½çš„æ¨¡çµ„å’Œå…ƒä»¶ã€‚

> _ç¾åœ¨ï¼Œæˆ‘å€‘éƒ½æ˜¯çµæ§‹åŒ–çš„ç¨‹å¼è¨­è¨ˆå¸«ï¼Œé›–ç„¶é€™ä¸ä¸€å®šæ˜¯ä½ é¸æ“‡çš„ã€‚_  
> _åªæ˜¯å› ç‚ºæˆ‘å€‘çš„èªè¨€ç„¡æ³•è®“æˆ‘å€‘é¸æ“‡ä½¿ç”¨ç„¡æ¢ä»¶ç›´æ¥è½‰ç§»æ§åˆ¶ã€‚_ ([really?][goto-in-javascript] ğŸ˜ğŸ˜ğŸ˜)

### ç§‘å­¸çš„è­‰æ˜èˆ‡æ¸¬è©¦

_æ•¸å­¸æ˜¯è¦è­‰æ˜é™³è¿°æ˜¯ trueï¼Œç§‘å­¸æ˜¯è¦è­‰æ˜é™³è¿°æ˜¯ false_

#### ç§‘å­¸çš„è­‰æ˜

ç§‘å­¸çš„å®šç†å’Œå®šå¾‹éƒ½ç„¡æ³•ç”¨è­‰æ˜ä¾†è¡¨é”å…¶æ­£ç¢ºæ€§ã€‚  
ä¾‹å¦‚ï¼šè­‰æ˜ç‰›é “ç¬¬äºŒé‹å‹•å®šå¾‹ F=maï¼Œç„¡å€«å¤šå°‘æ¬¡å¯¦é©—ï¼Œç¸½æœ‰ä¸€äº›å¯¦é©—è­‰æ˜ä»–æ˜¯ä¸æ­£ç¢ºçš„ã€‚

> -   ç§‘å­¸ä¸¦éè¦è­‰æ˜é™³è¿°æ˜¯æ­£ç¢ºçš„ï¼Œè€Œæ˜¯è¦**è­‰æ˜é™³è¿°æ˜¯éŒ¯èª¤çš„**ã€‚
> -   å¦‚æœæˆ‘å€‘ç¶“éåŠªåŠ›é‚„æ˜¯ç„¡æ³•è­‰æ˜ä»–æ˜¯ falseï¼Œé‚£éº½æˆ‘å€‘å°±èªç‚ºä»–è¶³å¤ æ­£ç¢ºã€‚

#### æ¸¬è©¦

ç¾åœ¨æˆ‘å€‘çš„æ¸¬è©¦éƒ½æ˜¯ç”¨ç§‘å­¸çš„æ–¹å¼è­‰æ˜

> -   æ¸¬è©¦é¡¯ç¤ºäº†éŒ¯èª¤çš„å­˜åœ¨ï¼Œè€Œä¸æ˜¯æ²’æœ‰éŒ¯èª¤ã€‚
> -   é€™ç¨®è­‰æ˜ä¸æ­£ç¢ºçš„æ–¹å¼åªèƒ½ç”¨æ–¼å¯è­‰çš„ç¨‹å¼ï¼Œä¸€å€‹ä¸å¯æ­£çš„ç¨‹å¼(*ç„¡é™åˆ¶çš„*ä½¿ç”¨ goto)ä¸èƒ½è¢«èªç‚ºæ˜¯æ­£ç¢ºçš„ã€‚

#### æ¸¬è©¦çš„å•é¡Œ

-   ```tsx
    // javascript
    function Add(a, b) {
    	return a + b
    }

    // safeï¼Ÿ
    test('Is sum of two number', () => {
    	expect(Add(2, 2).toBe(4)
    })

    ```

-   [å·¥ç¨‹å¸«ï¼šä½ å†è·Ÿæˆ‘èªªä¸€æ¬¡ä½ æ˜¯æ€éº¼å¼„çš„][qa-joke]

<details>
  <summary>ä½ æ°¸é ä¸çŸ¥é“Useræœƒæ€éº¼ä½¿ç”¨æˆ‘å€‘çš„ç”¢å“</summary>
  <img src="https://i.pinimg.com/originals/b6/53/01/b653019680cd24ff0a44001f78783fbd.gif" />
</details>

-   [å‚³æ•™ï¼šWrite fewer tests!][xstate-testing]

### ç¸½çµ

-   ç„¡é™åˆ¶ä½¿ç”¨`goto`æœƒä½¿ç¨‹å¼ç„¡æ³•è¢«åˆ†è§£æˆå¯è¢«è­‰æ˜çš„å–®å…ƒ(ç„¡æ³•è¢«æ¸¬è©¦)
-   ä½¿ç”¨çµæ§‹åŒ–ç¨‹å¼è¿«ä½¿æˆ‘å€‘å°‡ç¨‹å¼åˆ†è§£æˆä¸€çµ„çµ„å¯è¢«è­‰æ˜çš„å–®å…ƒ
-   å¤§å‹ç¨‹å¼ç”±å°çš„å¯è¢«æ¸¬è©¦çš„å–®å…ƒçµ„æˆ
-   [å›åˆ°é–‹é ­](#çµæ§‹åŒ–ç¨‹å¼è¨­è¨ˆ)

[divide-and-conquer-link]: https://yalanin.medium.com/%e6%bc%94%e7%ae%97%e6%b3%95-%e5%88%86%e6%b2%bb%e6%b3%95-divide-and-conquer-592145d72699
[what-is-wrong-with-using-goto]: https://stackoverflow.com/questions/3517726/what-is-wrong-with-using-goto
[goto-in-javascript]: https://stackoverflow.com/questions/9751207/how-can-i-use-goto-in-javascript
[qa-joke]: https://forum.gamer.com.tw/Co.php?bsn=60076&sn=57532520
[xstate-testing]: https://youtu.be/tpNmPKjPSFQ?t=196
[iteration]: https://zh.wikipedia.org/zh-tw/%E8%BF%AD%E4%BB%A3
