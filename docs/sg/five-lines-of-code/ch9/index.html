<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-sg/five-lines-of-code/ch9">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Ch9: 愛上刪除程式碼 | Noob Tech Note</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://noobtechnote.github.io/docs/sg/five-lines-of-code/ch9"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Ch9: 愛上刪除程式碼 | Noob Tech Note"><meta data-rh="true" name="description" content="觀念："><meta data-rh="true" property="og:description" content="觀念："><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://noobtechnote.github.io/docs/sg/five-lines-of-code/ch9"><link data-rh="true" rel="alternate" href="https://noobtechnote.github.io/docs/sg/five-lines-of-code/ch9" hreflang="en"><link data-rh="true" rel="alternate" href="https://noobtechnote.github.io/docs/sg/five-lines-of-code/ch9" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.40771ce4.css">
<link rel="preload" href="/assets/js/runtime~main.e984117f.js" as="script">
<link rel="preload" href="/assets/js/main.10b554c0.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/icon-144.png" alt="Noob Tech Note" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/icon-144.png" alt="Noob Tech Note" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Noob Tech Note</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/sg">Study Group</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/sg/">Study Group Notes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Study Group Notes&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/sg/clean-architecture/">Clean Architecture</a><button aria-label="Toggle the collapsible sidebar category &#x27;Clean Architecture&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/sg/fenix-architecture/">鳳凰架構</a><button aria-label="Toggle the collapsible sidebar category &#x27;鳳凰架構&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/sg/five-lines-of-code/">五行程式碼規則</a><button aria-label="Toggle the collapsible sidebar category &#x27;五行程式碼規則&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sg/five-lines-of-code/ch1">Ch1: 重構重構</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sg/five-lines-of-code/ch2">Ch2: 深入瞭解重構的原理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sg/five-lines-of-code/ch3">Ch3: Shatter long functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sg/five-lines-of-code/ch4">Ch4: 讓型別碼能運作</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sg/five-lines-of-code/ch5">Ch5: 把相似的程式碼統合在一起</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sg/five-lines-of-code/ch6">Ch6: Defend the data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sg/five-lines-of-code/ch7">Ch7: 與編譯器合作</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sg/five-lines-of-code/ch8">Ch8: 遠離註釋</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/sg/five-lines-of-code/ch9">Ch9: 愛上刪除程式碼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sg/five-lines-of-code/ch10">Ch10: 不要害怕新增程式碼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sg/five-lines-of-code/ch11">Ch11: 遵循程式碼中的結構</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/sg/fundamentals-of-software-architecture/">軟體架構原理 - 工程方法</a><button aria-label="Toggle the collapsible sidebar category &#x27;軟體架構原理 - 工程方法&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/sg/web-api-the-good-parts/">Web API: The Good Parts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Web API: The Good Parts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/sg/"><span itemprop="name">Study Group Notes</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/sg/five-lines-of-code/"><span itemprop="name">五行程式碼規則</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Ch9: 愛上刪除程式碼</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Ch9: 愛上刪除程式碼</h1></header><h3 class="anchor anchorWithStickyNavbar_LWe7" id="觀念">觀念：<a href="#觀念" class="hash-link" aria-label="Direct link to 觀念：" title="Direct link to 觀念：">​</a></h3><p>The functionality comes from code, so it is easy to think that code is implicitly valuable—but this is not the case.<br>
<!-- -->(功能來自程式碼，因此很容易認為程式碼具有隱含的價值，但事實並非如此)  </p><p>Code is a liability. It is a necessary evil that we have to live with to get the functionality we need.<br>
<!-- -->(代碼是一種責任。 為了獲得我們需要的功能，我們必須忍受這種不可避免的罪惡。)  </p><p>We tend to feel that code is valuable is that it is expensive to produce.<br>
<!-- -->(我們傾向於認為程式碼有價值的另一個原因是它的生產成本很高。 )  </p><p>Writing code requires skilled workers to spend lots of time .<br>
<!-- -->(編寫程式碼需要熟練工人花費大量時間 )  </p><p>Attributing value to something because we have spent time or effort on it is called the sunk-cost fallacy.<br>
<!-- -->(因為我們在某件事上花了時間或精力而賦予它價值，這被稱為沉沒成本謬誤。)  </p><p>But the code itself is an expense for as long as we keep it.<br>
<!-- -->(因為無論程式碼是否有價值，我們都必須不斷地努力維護程式碼。)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="91-刪除程式碼可能是下一個重要議題">9.1. 刪除程式碼可能是下一個重要議題<a href="#91-刪除程式碼可能是下一個重要議題" class="hash-link" aria-label="Direct link to 9.1. 刪除程式碼可能是下一個重要議題" title="Direct link to 9.1. 刪除程式碼可能是下一個重要議題">​</a></h2><p>The biggest leaps mainstream programming has taken:</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>1944:<br>
<!-- -->Computers were used to perform calculations without any abstractions.</p><p>1952:<br>
<!-- -->Grace Hopper invented the first linker,
allowing computers to work with symbols instead of pure calculations.</p><p>1957:<br>
<!-- -->The previous leap led to the invention of the compiler, specifically, fortran.
We could now code using high-level control operators like loops.</p><p>1972:
The next big issue to solve was data abstractions.
Enter a new generation of languages: programming languages like C—and later C++ and Java
<strong><em>work with data indirectly, through pointers and references.</em></strong></p><p>1994:<br>
<!-- -->Another big leap forward came from the Gang of Four (Erich Gamma,Richard Helm, Ralph Johnson, John Vlissides),
who created a set of reusable design patterns.
<strong><em>Design patterns function as high-level building blocks when we are designing software to be built.</em></strong></p><p>1999:<br>
<!-- -->Next, Martin Fowler compiled a catalogue of <strong><em>standard refactoring patterns</em></strong>.<br>
<!-- -->Unlike design patterns,
these do not require up-front design but let us improve the design of existing code.</p><p>2011:<br>
<!-- -->The most recent big leap forward in programming,
in my opinion, was the microservices architectures popularized by Sam Newman.
A microservices architecture is based on the old principle of <strong><em>loose coupling</em></strong>,
but it solves a modern scaling issue.
It also allows emerging architecture through indirect communication;
we can improve the design of running systems.</p></div></div><p>＊註：(Loose Coupling):<br>
<!-- -->是由許多小巧的、自給自足的程式模組（連同其資料）組合起來的，<br>
<!-- -->好的微服務（microservices）設計也應該以此為設計原則。<br>
<!-- -->這些自給自足的程式模組可以隨時加入系統或者從系統中移除，不會造成系統太大的漣漪。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="92-刪除程式碼以消除附帶的複雜性">9.2 刪除程式碼以消除附帶的複雜性<a href="#92-刪除程式碼以消除附帶的複雜性" class="hash-link" aria-label="Direct link to 9.2 刪除程式碼以消除附帶的複雜性" title="Direct link to 9.2 刪除程式碼以消除附帶的複雜性">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">更大的程式碼庫意味著更複雜的模型，以及需要追蹤的更大的實用程式庫。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">這種複雜性有兩種類型：領域複雜性(Domain complexity)和附帶複雜性(Incidental complexity)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">領域複雜性是指該領域的複雜程度 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">例如，無論我們做什麼，計算稅的系統都會很複雜，因為稅法很複雜。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Incidental complexity: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * technical ignorance (技術無知)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * technical waste (技術浪費)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * technical debt (技術債)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * technical drag (技術阻力)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">technical ignorance: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">錯誤的決定，從而導致了糟糕的架構 (缺乏足夠的技能來解決問題而增加不必要的耦合)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">technical waste : </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">技術浪費源自於某種形式的時間壓力。 我們對問題或模型的理解不夠深入，而且太忙而無暇弄清楚。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">或者我們因為沒有時間而跳過測試或重構, 或者規避某個流程以按時完成任務。(通常由於外部壓力)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">technical debt:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">技術債是指我們暫時選擇次優解決方案以獲得一些收益。 這也是一個深思熟慮的決定，但是暫時的。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(如果我們選擇的解決方案不是暫時的，那就是技術浪費)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">technical drag:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">技術阻力是指任何導致開發速度變慢的因素。 它包括所有其他類別以及文件、測試，甚至所有程式碼。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EX: 自動化測試使更改程式碼變得更加困難，因為還需要更改測試</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">技術阻力不一定是壞事, 通常是指建構某些東西的副作用。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">它本身並不壞，但在我們維護很少使用的文件、功能或程式碼的情況下就很糟糕了。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在這種情況下，刪除該功能以消除阻力可能在經濟上是有利的。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="93-根據親密程度對代碼進行分類">9.3 根據親密程度對代碼進行分類<a href="#93-根據親密程度對代碼進行分類" class="hash-link" aria-label="Direct link to 9.3 根據親密程度對代碼進行分類" title="Direct link to 9.3 根據親密程度對代碼進行分類">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Dan North 在 GOTO 2016 將程式碼的親密程度份成以下三類：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Intimate Code: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">這是最親密的層次，通常是由單一的開發者或一個小團隊負責的程式碼。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">這種程式碼往往非常體現應用程式的細節和內部實現，因為只有少數人參與其中。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Friendly Code: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">這是中等程度的親密度，可能是由一個較大的團隊負責的程式碼。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">程式碼仍然應該是易讀的，但可能不需要深入了解每個細節。團隊成員之間需要有合作和協同工作的能力。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Formal Code: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">這是最不親密的層次，通常是指由不同組織、團隊或廣泛的開發者社群負責的程式碼。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在這個層次上，程式碼應該非常清晰、易讀，並且有良好的文件。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">開發者不需要深入了解應用程式的所有細節，而是能夠快速理解和使用程式碼。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">註：作為某些程式碼的作者, 自然會讓我們在理解它方面具有優勢； </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">但重要的是，這種優勢會減弱 (大約兩個月後, 有可能開發人員忘記或是有新功能加入)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="94-刪除遺留系統中的程式碼">9.4 刪除遺留系統中的程式碼<a href="#94-刪除遺留系統中的程式碼" class="hash-link" aria-label="Direct link to 9.4 刪除遺留系統中的程式碼" title="Direct link to 9.4 刪除遺留系統中的程式碼">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Circus factor (馬戲團因素, 出自 Dan North文章 &quot;Embrace Uncertainty&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">這個術語強調了在軟體開發中，特別是在面對複雜或不熟悉的系統部分時，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">團隊成員之間的溝通和透明度的重要性。如果整個團隊都過度依賴某個人或某些人對特定領域的知識，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">而其他人則缺乏理解，那麼整個開發過程可能會受到阻礙，彷彿一場馬戲團表演。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">遺留程式碼(Legacy code)的常見定義是「我們害怕修改的程式碼」, 通常就是在Circus factor的情境下所產生</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="941-用strangler-fig-pattern-來識別legacy-code">9.4.1 用Strangler Fig Pattern 來識別Legacy code<a href="#941-用strangler-fig-pattern-來識別legacy-code" class="hash-link" aria-label="Direct link to 9.4.1 用Strangler Fig Pattern 來識別Legacy code" title="Direct link to 9.4.1 用Strangler Fig Pattern 來識別Legacy code">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Strangler Fig Pattern:  是一種軟體重構的模式，用於逐步取代或重建一個現有的應用程式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(Strangler Fig:絞殺植物 用類似他們的方式繁殖，繞過現有的樹木，最終將其取代。)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Figure-9.1" src="/assets/images/strangler-f4c7d6553c87ea6dad220964dbd8de1c.png" width="1833" height="552" class="img_ev3q"></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">當我們深入了解Legacy code時</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.我們需要知道每個部分被呼叫了多少?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.我們還需要知道其中有多少呼叫是成功的? (有些程式碼被呼叫但失敗，因此結果從未被使用)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.我們需要知道遺留程式碼與軟體其餘部分的耦合程度。(作者建議從這點開始)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">為了理解一段程式碼的耦合程度，我們可以將其隔離，使所有存取都通過虛擬閘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(將class封裝在新package/namespace中來實現這一點)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Figure-9.1" src="/assets/images/new_package_namespace_for_legacy_code-49dd26bc3370648fbd0197c2f35020fd.png" width="746" height="368" class="img_ev3q"></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">將新namespace中的所有public改為package-private , 增加public function來修改錯誤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">便可知道legacy code有多少個接觸點，因為它們都是Class: Gate中的function。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Figure-9.2" src="/assets/images/monitoring_legacy_code-3af165fca5f1ff09e62f949694d13dfa.png" width="747" height="500" class="img_ev3q"></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">記錄每個呼叫以及它是否成功。 (這只是最低限度)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">legacy code投入正式環境一段時間後，我們知道有多少部分被使用，以及某些呼叫是否總是失敗。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="942-用-strangler-fig-pattern-來改良程式碼">9.4.2 用 strangler fig pattern 來改良程式碼<a href="#942-用-strangler-fig-pattern-來改良程式碼" class="hash-link" aria-label="Direct link to 9.4.2 用 strangler fig pattern 來改良程式碼" title="Direct link to 9.4.2 用 strangler fig pattern 來改良程式碼">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">呈上一小節：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. 呼叫的頻率通常可以很好地顯示它失敗後的嚴重程度</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. 最常調用的部分幾乎肯定應該被migrated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. 最少調用的部分幾乎肯定可以被刪除</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. 如果某些legacy code至關重要或具有戰略意義，我們應該先確認呼叫的頻率反映了這一事實。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">一旦程式碼的用法反映了其重要性，我們就需要熟悉這些程式碼。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">我們有兩個選擇：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.refactor那部分的legacy code，從而消除耦合性和脆弱性，將程式碼移至「最接近」的category； </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.or rebuild the part and switch to the new version by changing the gate once the rebuilt code is ready.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Figure-9.3" src="/assets/images/how_to_deal_with_legacy_code-35b81762494a6f77c8fab4dc2bd4ce07.png" width="740" height="238" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="95從凍結的項目中刪除程式碼">9.5從凍結的項目中刪除程式碼<a href="#95從凍結的項目中刪除程式碼" class="hash-link" aria-label="Direct link to 9.5從凍結的項目中刪除程式碼" title="Direct link to 9.5從凍結的項目中刪除程式碼">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">凍結的項目不僅限於程式碼； 它們可以包括Database、integrations、services以及程式碼以外的許多東西。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(一旦原作者忘記了該項目，幾乎不可能發現它的存在 , 尤其是user training)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">例如：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">主分支上可能有未使用的程式碼, 沒有任何跡象表明它有被使用，所以每當我們進行更改時都必須考慮它，並且必須維護它。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">凍結項目的另一個問題是，當障礙被移除時，無法保證功能仍然正常。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="951-將desired-設為-default">9.5.1 將desired 設為 default<a href="#951-將desired-設為-default" class="hash-link" aria-label="Direct link to 9.5.1 將desired 設為 default" title="Direct link to 9.5.1 將desired 設為 default">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">* 如果專案在程式碼庫之外沒有任何影響(沒有opensource?)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    我們可以將專案從主分支恢復並將其放入單獨的分支中。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    然後我們需要對其進行標記，並在未來六週後進行記錄以刪除該標記。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (如果我們在六週內不開始使用該項目，它將被刪除。)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 如果專案包含程式碼外部的更改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    我們應該在專案管理工具中製作一張ticket，註明要刪除的所有組件，並將ticket安排在六週後。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="952-透過-spike-and-stabilize-減少浪費">9.5.2 透過 spike and stabilize 減少浪費<a href="#952-透過-spike-and-stabilize-減少浪費" class="hash-link" aria-label="Direct link to 9.5.2 透過 spike and stabilize 減少浪費" title="Direct link to 9.5.2 透過 spike and stabilize 減少浪費">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Spike 階段:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Spike 是一個短暫的、實驗性的研究階段，旨在評估新技術或解決方案的可行性。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    目的： 在這個階段，團隊會深入探索和評估新技術，通常包括建立原型、進行實驗、進行測試，以了解新技術是否能夠解決問題或滿足需求。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    時間框架： Spike 階段通常是一個短期的努力，其目標是迅速獲取足夠的知識，以便做出是否採用該技術的決策。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stabilize 階段:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Stabilize 階段是在確定新技術可行後，將其整合到實際開發流程中的階段。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    目的： 在這個階段，團隊將學到的知識應用到實際的開發項目中，建立穩定的、可擴展的解決方案。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    時間框架： Stabilize 階段是一個長期的過程，要確保新技術被成功地整合到團隊的工作流程中，並且能夠在長期內保持穩定性。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">作者建議此時應該要將frozen project視為一個Spike</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=&gt; 沒有自動化測試，也沒有重構 (但是要進行監控，以便我們知道程式碼的使用量)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">六週後，查看它是否已被使用(有,就要進行重構!沒有就要刪除)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Figure-9.4" src="/assets/images/how_to_deal_with_frozen_projects-27ce4f89a6be7c1c0cff0ef7fa0c43c2.png" width="732" height="260" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="96-刪除版本控制中的分支">9.6 刪除版本控制中的分支<a href="#96-刪除版本控制中的分支" class="hash-link" aria-label="Direct link to 9.6 刪除版本控制中的分支" title="Direct link to 9.6 刪除版本控制中的分支">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">我們出於多種目的創建分支機構。 主要原因分為以下幾類：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.進行hotfix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.為了tag commits，我們可能需要稍後再返回，例如release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.在不干擾同事工作的情況下做某事</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">一旦我們合併到main 中，第一類和第三類就應該被刪除</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(在第二類中，我們應該使用Git的內建方法進行Tag)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">為什麼分支會堆積?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 有時這只是一個疏忽，例如當我們在合併拉取請求時忘記勾選「刪除分支」選項，或是在完成後忘記刪除實驗分支</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* A more difficult type of branch is one that is pending but blocked because it cannot pass the gate to get onto main.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">我們應該只有一個主分支和可能的發布分支</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">任何其他分支最好只能存活幾天。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">對於長期存在的分支，我們將自己暴露在昂貴的、令人心碎的、容易出錯的合併衝突中。 混亂會導致更多混亂。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="961-實施分支機構限制來減少浪費">9.6.1 實施分支機構限制來減少浪費<a href="#961-實施分支機構限制來減少浪費" class="hash-link" aria-label="Direct link to 9.6.1 實施分支機構限制來減少浪費" title="Direct link to 9.6.1 實施分支機構限制來減少浪費">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">為了解決這個問題，我們可以採用看板開發方法中的一個元素。 看板使用work in progress (WIP) 限制的概念，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">這意味著我們對團隊可以擁有的正在進行的ticket數量設定了上限。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Figure-9.5" src="/assets/images/how_to_deal_with_branches-94ba3135de0c7a3d0aabd36be5a70ea2.png" width="951" height="299" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="97-deleting-code-documentation">9.7 Deleting code documentation<a href="#97-deleting-code-documentation" class="hash-link" aria-label="Direct link to 9.7 Deleting code documentation" title="Direct link to 9.7 Deleting code documentation">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Documentation is invaluable when exactly three conditions：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.Relevant:It needs to answer the right question.(提出有價值的問題)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.Accurate:The answer needs to be correct.(答案必須正確)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.Discoverable:We need to be able to find the answer.(我們可以找到答案)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">保留過時文件的危險取決於它違反了三個屬性中的哪一個。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.文件是否不可發現:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    浪費了研究時間和寫作時間。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.更糟的是保留不相關的文件：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    浪費了寫作時間，但每次我們尋找答案時也必須略過不相關的部分——最後，我們仍然必須進行研究。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.最糟糕的是文件不準確：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    在最好的情況下，它可能會導致混亂和懷疑；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    在最壞的情況下，它可能會導致錯誤。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="971-如何建立規則來編輯文件">9.7.1 如何建立規則來編輯文件<a href="#971-如何建立規則來編輯文件" class="hash-link" aria-label="Direct link to 9.7.1 如何建立規則來編輯文件" title="Direct link to 9.7.1 如何建立規則來編輯文件">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">*文件可能會失去其相關性或準確性，並非所有內容都需要記錄下來。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*文件似乎可以讓您免於重複先前的研究，但只有當文件沒有過時才是這種情況。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*當需要確定記錄某些資訊是否有意義時，會經歷以下過程：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1.如果主題經常改變，那麼記錄它就沒有什麼好處。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2.否則，如果我們很少使用它，則將其記錄下來。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    3.否則，如果我們可以自動化它，那就自動化它。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    4.將其背下來</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Figure-9.6" src="/assets/images/how_to_deal_with_documentation-c58b2365f5117c69dad0f0d081f3b589.png" width="742" height="254" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="98-刪除測試程式碼">9.8 刪除測試程式碼<a href="#98-刪除測試程式碼" class="hash-link" aria-label="Direct link to 9.8 刪除測試程式碼" title="Direct link to 9.8 刪除測試程式碼">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Kent Beck 在([Test Desiderata](http://mng.bz/BKW2))中描述了測試的 12 個屬性。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">本文關注那些損害開發的測試。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="981-刪除樂觀測試">9.8.1 刪除樂觀測試<a href="#981-刪除樂觀測試" class="hash-link" aria-label="Direct link to 9.8.1 刪除樂觀測試" title="Direct link to 9.8.1 刪除樂觀測試">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">測試的一個必要特性是它們能夠激發信心,不能失敗的測試是沒有價值的。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">“Never trust a test you have not seen fail.”</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="982-刪除悲觀測試">9.8.2 刪除悲觀測試<a href="#982-刪除悲觀測試" class="hash-link" aria-label="Direct link to 9.8.2 刪除悲觀測試" title="Direct link to 9.8.2 刪除悲觀測試">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">如果我們的測試始終為紅色，那麼即使測試發現了錯誤，我們也會面臨警報疲勞和錯過嚴重錯誤的風險。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="983-修復或刪除不穩定的測試">9.8.3 修復或刪除不穩定的測試<a href="#983-修復或刪除不穩定的測試" class="hash-link" aria-label="Direct link to 9.8.3 修復或刪除不穩定的測試" title="Direct link to 9.8.3 修復或刪除不穩定的測試">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Flaky tests（不穩定測試）:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">是指在每次執行時，其結果可能不一致或不可靠的測試案例。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">這種不穩定性可能導致測試有時通過，有時失敗，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">而不是由於程式碼本身的問題，而是由於測試本身的問題或測試執行的環境條件</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="984-重構程式碼以擺脫複雜的測試">9.8.4 重構程式碼以擺脫複雜的測試<a href="#984-重構程式碼以擺脫複雜的測試" class="hash-link" aria-label="Direct link to 9.8.4 重構程式碼以擺脫複雜的測試" title="Direct link to 9.8.4 重構程式碼以擺脫複雜的測試">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">需要重構測試也表明正在測試的程式碼沒有適當的架構</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">任何重構工作都應該在程式碼中，而不是在測試中。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="985-專門化測試來加快速度">9.8.5 專門化測試來加快速度<a href="#985-專門化測試來加快速度" class="hash-link" aria-label="Direct link to 9.8.5 專門化測試來加快速度" title="Direct link to 9.8.5 專門化測試來加快速度">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">在某些地方，我們使用end-to-end測試來檢查某些功能是否有效。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">但這些測試可能會很慢，而且測試次數過多會影響我們運行它們的頻率。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">如果某些測試導致我們減少執行其他測試的頻率，那麼它們就會損害開發，我們需要解決這種情況</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">有兩種方法可以達成目標：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 慢速測試與快速測試分開，並盡可能頻繁地執行快速測試； </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* 觀察導致緩慢測試失敗的原因，如果答案為空，則將其刪除（樂觀測試）。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Figure-9.6" src="/assets/images/how_to_deal_with_automated_tests-638c961714858018aec8a51805a9981c.png" width="735" height="252" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="99-刪除configuration-code">9.9 刪除configuration code<a href="#99-刪除configuration-code" class="hash-link" aria-label="Direct link to 9.9 刪除configuration code" title="Direct link to 9.9 刪除configuration code">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">大多數程式設計師都知道hard code是不好的。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">我們學會處理這個問題的第一個解決方案是將hard code值提取到constant</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">於是有了以下的名言：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;If you can’t make it perfect, at least make it configurable.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">當可配置性以功能的形式出現時，它使我們能夠將deploy和release分開</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">提高deploy頻率，並使發布成為業務決策而不是技術決策。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">然而，它確實是有代價的：我們每增加一個可配置性，就會增加程式碼的複雜性。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="991-確定臨時配置">9.9.1 確定臨時配置<a href="#991-確定臨時配置" class="hash-link" aria-label="Direct link to 9.9.1 確定臨時配置" title="Direct link to 9.9.1 確定臨時配置">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">對於處理由於配置而導致的複雜性增加，考慮盡可能多的臨時配置。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">根據配置的預期壽命對其進行分類。建議的類別是:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *EXPERIMENTAL CONFIGURATION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *TRANSITIONAL CONFIGURATION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *PERMANENT CONFIGURATION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPERIMENTAL CONFIGURATION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">實驗配置往往是看程式碼經過測試變更是否變得優越 (EX: beta 測試或 A/B 測試)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">但是測試的配置往往會從實驗階段洩漏出來並成為永久性的，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">將用戶群分為打開標誌的用戶群和關閉標誌的用戶群，從而僅增加複雜性而不增加使用率。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">所以為了避免這種情況，我們應該從一開始就確定某件事是否是實驗性的？並在完成後創建一個提醒</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TRANSITIONAL CONFIGURATION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">當邏輯或程式碼庫正在經歷重大變化時，過渡配置非常有用(Ex: 從Legacy系統遷移到新系統)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">可以將配置作為程式碼的一部分將其放在程式碼中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">意味著我們可以在一個中心位置收集與轉換相關的所有配置(應該被視為一個集合)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">其次，通常有一個時間點，過渡完成，舊的部分可以被刪除。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">利用這一點，我們可以避免花時間修改程式碼和刪除小部分，只需等待整個事情立即完成即可。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PERMANENT CONFIGURATION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">永久配置應該會導致使用量的增加或維護起來很簡單</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">但應該對永久類別中的內容持非常批判的態度。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">如果它不會導致使用量增加並且維護起來也很困難，那麼它可能不值得花費成本，應該將其刪除。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Figure-9.6" src="/assets/images/how_to_deal_with_configuration_code-f847cd25bf773e3c2f1d509408980920.png" width="732" height="233" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="910-刪除來自library的程式碼">9.10 刪除來自Library的程式碼<a href="#910-刪除來自library的程式碼" class="hash-link" aria-label="Direct link to 9.10 刪除來自Library的程式碼" title="Direct link to 9.10 刪除來自Library的程式碼">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">用第三方函式庫的其中一個議題是安全性，我們的安全性品質很容易對我們軟體的可行性產生直接影響。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">如果我們的軟體發生重大安全事件，可能會破壞使用者的信任，進而破壞軟體。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">不幸的是，使用函式庫是一把雙面刃，因為雖然我們不需要維護它們的程式碼，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">但我們確實必須更新它們，這有時意味著調整我們的程式碼。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">這樣做可能非常耗時且容易出錯。 使用庫也會增加團隊的有限認知負擔，因為團隊成員必須至少掌握庫的實用知識。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">有時會引入錯誤，我們需要實施臨時解決方法以使我們的軟體正常運作。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">最後，當library中的錯誤被修復時，我們必須撤銷我們的解決方法，這樣它們就不會在程式碼中惡化。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>A famous thought experiment</div><div class="admonitionContent_S0QG"><p>在一篇部落格文章中，
David Gilbertson 提出了一個發人深省的虛構場景，他發布了一個小型 JavaScript 庫，為控制台中的日誌訊息添加顏色。
他報告說：“人們喜歡漂亮的顏色”和“我們生活在一個人們安裝 npm 包就像服用止痛藥一樣的時代。”
透過最少的社會工程（一些拉取請求），他將他的庫注入到其他庫中。
該庫每月開始獲得數十萬次下載。 然而，用戶不知道的是，該程式庫包含惡意程式碼，可從使用該程式庫的網站竊取資料。</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="9101-限制我們對外部函式庫的依賴">9.10.1 限制我們對外部函式庫的依賴<a href="#9101-限制我們對外部函式庫的依賴" class="hash-link" aria-label="Direct link to 9.10.1 限制我們對外部函式庫的依賴" title="Direct link to 9.10.1 限制我們對外部函式庫的依賴">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">解決上述難題的一種方法是從高品質供應商那裡選擇庫，這樣我們就可以相信他們的內部品質和安全要求。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">建議是讓您的dependencies可見，然後對每個函式庫是增強還是關鍵進行分類。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">如果程式碼庫中潛藏著未使用的庫，請將其刪除。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">使用這種方法可以降低您的依賴性，並最終減少您對庫的依賴。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Critical Libraries（關鍵程式庫）:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    這些是在應用程式中扮演著核心、必不可少角色的程式庫或依賴項。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    這些程式庫通常包括核心的功能或基本的工具，是應用程式正常運作所必需的。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    如果這些程式庫中的某一個失敗或遇到問題，可能會導致整個應用程式無法運行。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enhancing Libraries（擴充程式庫）:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    這些是提供額外功能或增強應用程式某些方面的程式庫。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    雖然這些程式庫對於應用程式的某些功能可能很重要，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    但它們並不是應用程式的核心要素，而是用來擴充或增強應用程式的能力。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    失敗或問題可能會影響特定功能，但通常不會導致整個應用程式的崩潰。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Figure-9.7" src="/assets/images/how_to_deal_with_third_party_libraries-d86d021468a2709b2257c5cd48476611.png" width="725" height="229" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="911-從功能中刪除程式碼">9.11 從功能中刪除程式碼<a href="#911-從功能中刪除程式碼" class="hash-link" aria-label="Direct link to 9.11 從功能中刪除程式碼" title="Direct link to 9.11 從功能中刪除程式碼">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">一個常見的誤解是，功能與使用相關，因此添加更多功能會增加更多價值。 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">不幸的是，事情並沒有那麼簡單。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在平衡程式碼成本與功能優勢時，許多因素都在發揮作用：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.我們接受複雜性增加的時間有多長，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.我們如何重視可預測性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.我們如何測試新功能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4.我們的能力如何？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在任何成本/效益關係中，有兩種​​方法可以增加價值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.建立複雜的新功能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.透過重構或更好的是刪除程式碼來尋找降低成本的方法(通常更容易)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Figure-9.8" src="/assets/images/how_to_deal_with_working_features-36afcecc11df10541496a0b6df7fe652.png" width="737" height="245" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/NoobTechNote/NoobTechNote.github.io/tree/main/docs/sg/five-lines-of-code/ch9.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-01-21T14:20:22.000Z">Jan 21, 2024</time></b> by <b>ChenTsungYu</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/sg/five-lines-of-code/ch8"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Ch8: 遠離註釋</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/sg/five-lines-of-code/ch10"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Ch10: 不要害怕新增程式碼</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#觀念" class="table-of-contents__link toc-highlight">觀念：</a></li><li><a href="#91-刪除程式碼可能是下一個重要議題" class="table-of-contents__link toc-highlight">9.1. 刪除程式碼可能是下一個重要議題</a></li><li><a href="#92-刪除程式碼以消除附帶的複雜性" class="table-of-contents__link toc-highlight">9.2 刪除程式碼以消除附帶的複雜性</a></li><li><a href="#93-根據親密程度對代碼進行分類" class="table-of-contents__link toc-highlight">9.3 根據親密程度對代碼進行分類</a></li><li><a href="#94-刪除遺留系統中的程式碼" class="table-of-contents__link toc-highlight">9.4 刪除遺留系統中的程式碼</a><ul><li><a href="#941-用strangler-fig-pattern-來識別legacy-code" class="table-of-contents__link toc-highlight">9.4.1 用Strangler Fig Pattern 來識別Legacy code</a></li><li><a href="#942-用-strangler-fig-pattern-來改良程式碼" class="table-of-contents__link toc-highlight">9.4.2 用 strangler fig pattern 來改良程式碼</a></li></ul></li><li><a href="#95從凍結的項目中刪除程式碼" class="table-of-contents__link toc-highlight">9.5從凍結的項目中刪除程式碼</a><ul><li><a href="#951-將desired-設為-default" class="table-of-contents__link toc-highlight">9.5.1 將desired 設為 default</a></li><li><a href="#952-透過-spike-and-stabilize-減少浪費" class="table-of-contents__link toc-highlight">9.5.2 透過 spike and stabilize 減少浪費</a></li></ul></li><li><a href="#96-刪除版本控制中的分支" class="table-of-contents__link toc-highlight">9.6 刪除版本控制中的分支</a><ul><li><a href="#961-實施分支機構限制來減少浪費" class="table-of-contents__link toc-highlight">9.6.1 實施分支機構限制來減少浪費</a></li></ul></li><li><a href="#97-deleting-code-documentation" class="table-of-contents__link toc-highlight">9.7 Deleting code documentation</a><ul><li><a href="#971-如何建立規則來編輯文件" class="table-of-contents__link toc-highlight">9.7.1 如何建立規則來編輯文件</a></li></ul></li><li><a href="#98-刪除測試程式碼" class="table-of-contents__link toc-highlight">9.8 刪除測試程式碼</a><ul><li><a href="#981-刪除樂觀測試" class="table-of-contents__link toc-highlight">9.8.1 刪除樂觀測試</a></li><li><a href="#982-刪除悲觀測試" class="table-of-contents__link toc-highlight">9.8.2 刪除悲觀測試</a></li><li><a href="#983-修復或刪除不穩定的測試" class="table-of-contents__link toc-highlight">9.8.3 修復或刪除不穩定的測試</a></li><li><a href="#984-重構程式碼以擺脫複雜的測試" class="table-of-contents__link toc-highlight">9.8.4 重構程式碼以擺脫複雜的測試</a></li><li><a href="#985-專門化測試來加快速度" class="table-of-contents__link toc-highlight">9.8.5 專門化測試來加快速度</a></li></ul></li><li><a href="#99-刪除configuration-code" class="table-of-contents__link toc-highlight">9.9 刪除configuration code</a><ul><li><a href="#991-確定臨時配置" class="table-of-contents__link toc-highlight">9.9.1 確定臨時配置</a></li></ul></li><li><a href="#910-刪除來自library的程式碼" class="table-of-contents__link toc-highlight">9.10 刪除來自Library的程式碼</a><ul><li><a href="#9101-限制我們對外部函式庫的依賴" class="table-of-contents__link toc-highlight">9.10.1 限制我們對外部函式庫的依賴</a></li></ul></li><li><a href="#911-從功能中刪除程式碼" class="table-of-contents__link toc-highlight">9.11 從功能中刪除程式碼</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024. DEX Study Group</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e984117f.js"></script>
<script src="/assets/js/main.10b554c0.js"></script>
</body>
</html>